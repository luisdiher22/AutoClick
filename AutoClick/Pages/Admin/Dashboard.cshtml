@page
@model AutoClick.Pages.Admin.DashboardModel
@{
    ViewData["Title"] = "Dashboard de Administrador";
    Layout = "~/Pages/Shared/_Layout.cshtml";
}

<style>
    /* Reset body styles for admin dashboard */
    body {
        margin: 0;
        padding: 0;
        background: #02081C !important;
        font-family: 'Montserrat', sans-serif !important;
        overflow-x: hidden;
    }
    
    .main-container {
        background: #02081C !important;
        min-height: 100vh;
        position: relative;
        width: 100%;
        overflow: hidden;
    }
    
    /* Admin Dashboard Container */
    .admin-dashboard-container {
        width: 100%;
        min-height: 100vh;
        position: relative;
        background: #02081C;
        overflow-x: hidden;
        overflow-y: auto;
    }
    
    /* Sidebar - Mantenemos solo lo esencial para responsive */
    
    /* Main Content Area */
    .admin-main-content {
        margin-left: 376px;
        padding: 24px 40px 0 40px;
        background: #02081C;
    }
    
    /* Page Title */
    .page-title {
        color: white;
        font-size: 36px;
        font-family: 'Montserrat', sans-serif;
        font-weight: 800;
        margin-bottom: 8px;
        margin-top: 0;
        letter-spacing: -0.5px;
    }
    
    .page-subtitle {
        color: rgba(255, 255, 255, 0.6);
        font-size: 14px;
        font-family: 'Montserrat', sans-serif;
        font-weight: 400;
        margin-top: 32px;
        margin-bottom: 32px;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    
    /* Section Headers */
    .section-header {
        padding: 0;
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 20px;
        margin-top: 40px;
    }
    
    .section-title {
        color: white;
        font-size: 22px;
        font-family: 'Montserrat', sans-serif;
        font-weight: 700;
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .section-icon {
        width: 40px;
        height: 40px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
        border: 1px solid rgba(255, 255, 255, 0.15);
    }

    .section-icon svg {
        width: 20px;
        height: 20px;
        fill: white;
    }
    
    /* Stats Grid - Diseño Mejorado */
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
        margin-bottom: 24px;
    }

    .stat-card {
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
        border-radius: 16px;
        border: 1px solid rgba(255, 255, 255, 0.15);
        padding: 24px;
        display: flex;
        flex-direction: column;
        gap: 12px;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }

    .stat-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(90deg, #4F46E5, #7C3AED);
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .stat-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
        border-color: rgba(255, 255, 255, 0.3);
    }

    .stat-card:hover::before {
        opacity: 1;
    }

    .stat-card-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .stat-card-icon {
        width: 48px;
        height: 48px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .stat-card-icon svg {
        width: 24px;
        height: 24px;
        fill: white;
    }

    .stat-card-title {
        color: rgba(255, 255, 255, 0.7);
        font-size: 12px;
        font-family: 'Montserrat', sans-serif;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 4px;
    }
    
    .stat-card-value {
        color: white;
        font-size: 40px;
        font-family: 'Montserrat', sans-serif;
        font-weight: 800;
        line-height: 1;
        margin-bottom: 8px;
    }

    .stat-card-label {
        color: rgba(255, 255, 255, 0.5);
        font-size: 13px;
        font-family: 'Montserrat', sans-serif;
        font-weight: 400;
        display: flex;
        align-items: center;
        gap: 6px;
    }

    .stat-card-label::before {
        content: '';
        width: 4px;
        height: 4px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.5);
    }

    /* Colores específicos para cada sección */
    .stat-card.visits .stat-card-icon {
        background: linear-gradient(135deg, #3B82F6, #2563EB);
    }

    .stat-card.ads .stat-card-icon {
        background: linear-gradient(135deg, #8B5CF6, #7C3AED);
    }

    .stat-card.messages .stat-card-icon {
        background: linear-gradient(135deg, #EC4899, #DB2777);
    }

    .stat-card.users .stat-card-icon {
        background: linear-gradient(135deg, #10B981, #059669);
    }

    @@media (max-width: 1024px) {
        .stats-grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    @@media (max-width: 768px) {
        .stats-grid {
            grid-template-columns: 1fr;
        }
        
        .admin-main-content {
            margin-left: 0;
            padding: 20px;
        }
    }
    
    /* Responsive */
    @@media (max-width: 1200px) {
        .admin-sidebar {
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }
        
        .admin-main-content {
            margin-left: 0;
        }
        
        .stats-container {
            width: 100%;
            max-width: 853px;
        }
    }
</style>

<div class="admin-dashboard-container">
    @await Html.PartialAsync("_AdminSidebar")
    
    <!-- Main Content -->
    <div class="admin-main-content">
        <!-- Page Title -->
        <h1 class="page-title">Dashboard</h1>
        <div class="page-subtitle">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z" fill="rgba(255, 255, 255, 0.6)"/>
            </svg>
            <span>Última actualización: @(Model.UltimaActualizacion?.ToString("dd/MM/yyyy HH:mm:ss") ?? "N/A")</span>
        </div>
        
        <!-- Anuncios Actuales -->
        <div class="section-header">
            <div class="section-title">
                <div class="section-icon">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5 11L6.5 6H17.5L19 11M5 11V17C5 17.5304 5.21071 18.0391 5.58579 18.4142C5.96086 18.7893 6.46957 19 7 19H17C17.5304 19 18.0391 18.7893 18.4142 18.4142C18.7893 18.0391 19 17.5304 19 17V11M5 11H19M7 14H7.01M17 14H17.01" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <span>Anuncios Actuales</span>
            </div>
        </div>
        
        <div class="stats-grid">
            <div class="stat-card ads">
                <div class="stat-card-header">
                    <div>
                        <div class="stat-card-title">TOTAL</div>
                        <div class="stat-card-value">@Model.TotalAutos</div>
                    </div>
                    <div class="stat-card-icon">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 17H15M9 17C7.89543 17 7 17.8954 7 19H17C17 17.8954 16.1046 17 15 17M9 17L8 7H16L15 17M20 7H4M10 7V5C10 4.44772 10.4477 4 11 4H13C13.5523 4 14 4.44772 14 5V7" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                </div>
                <div class="stat-card-label">Anuncios en el sistema</div>
            </div>
            
            <div class="stat-card ads">
                <div class="stat-card-header">
                    <div>
                        <div class="stat-card-title">ACTIVOS</div>
                        <div class="stat-card-value">@Model.AutosActivos</div>
                    </div>
                    <div class="stat-card-icon">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="9" stroke="white" stroke-width="2"/>
                            <path d="M9 12L11 14L15 10" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                </div>
                <div class="stat-card-label">Publicados y visibles</div>
            </div>
            
            <div class="stat-card ads">
                <div class="stat-card-header">
                    <div>
                        <div class="stat-card-title">INACTIVOS</div>
                        <div class="stat-card-value">@Model.AutosInactivos</div>
                    </div>
                    <div class="stat-card-icon">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="9" stroke="white" stroke-width="2"/>
                            <rect x="8" y="10" width="8" height="4" rx="1" fill="white"/>
                        </svg>
                    </div>
                </div>
                <div class="stat-card-label">Pausados u ocultos</div>
            </div>
        </div>
        
        <!-- Mensajes de Usuarios -->
        <div class="section-header">
            <div class="section-title">
                <div class="section-icon">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <span>Mensajes de Usuarios</span>
            </div>
        </div>
        
        <div class="stats-grid">
            <div class="stat-card messages">
                <div class="stat-card-header">
                    <div>
                        <div class="stat-card-title">TOTAL</div>
                        <div class="stat-card-value">@Model.TotalMensajes</div>
                    </div>
                    <div class="stat-card-icon">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M3 8L10.89 13.26C11.2187 13.4793 11.6049 13.5963 12 13.5963C12.3951 13.5963 12.7813 13.4793 13.11 13.26L21 8M5 19H19C19.5304 19 20.0391 18.7893 20.4142 18.4142C20.7893 18.0391 21 17.5304 21 17V7C21 6.46957 20.7893 5.96086 20.4142 5.58579C20.0391 5.21071 19.5304 5 19 5H5C4.46957 5 3.96086 5.21071 3.58579 5.58579C3.21071 5.96086 3 6.46957 3 7V17C3 17.5304 3.21071 18.0391 3.58579 18.4142C3.96086 18.7893 4.46957 19 5 19Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                </div>
                <div class="stat-card-label">Mensajes registrados</div>
            </div>
            
            <div class="stat-card messages">
                <div class="stat-card-header">
                    <div>
                        <div class="stat-card-title">HOY</div>
                        <div class="stat-card-value">@Model.MensajesHoy</div>
                    </div>
                    <div class="stat-card-icon">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="white" stroke-width="2"/>
                            <path d="M12 6V12L16 14" stroke="white" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </div>
                </div>
                <div class="stat-card-label">Mensajes recibidos hoy</div>
            </div>
            
            <div class="stat-card messages">
                <div class="stat-card-header">
                    <div>
                        <div class="stat-card-title">SEMANA</div>
                        <div class="stat-card-value">@Model.MensajesEstaSemana</div>
                    </div>
                    <div class="stat-card-icon">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M3 3V21M21 21H3M7 13V17M12 9V17M17 5V17" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                </div>
                <div class="stat-card-label">Últimos 7 días</div>
            </div>
        </div>
        
        <!-- Usuarios de la Plataforma -->
        <div class="section-header">
            <div class="section-title">
                <div class="section-icon">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M17 21V19C17 17.9391 16.5786 16.9217 15.8284 16.1716C15.0783 15.4214 14.0609 15 13 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21M23 21V19C22.9993 18.1137 22.7044 17.2528 22.1614 16.5523C21.6184 15.8519 20.8581 15.3516 20 15.13M16 3.13C16.8604 3.3503 17.623 3.8507 18.1676 4.55231C18.7122 5.25392 19.0078 6.11683 19.0078 7.005C19.0078 7.89317 18.7122 8.75608 18.1676 9.45769C17.623 10.1593 16.8604 10.6597 16 10.88M13 7C13 9.20914 11.2091 11 9 11C6.79086 11 5 9.20914 5 7C5 4.79086 6.79086 3 9 3C11.2091 3 13 4.79086 13 7Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <span>Usuarios de la Plataforma</span>
            </div>
        </div>
        
        <div class="stats-grid">
            <div class="stat-card users">
                <div class="stat-card-header">
                    <div>
                        <div class="stat-card-title">REGISTRADOS</div>
                        <div class="stat-card-value">@Model.TotalUsuarios</div>
                    </div>
                    <div class="stat-card-icon">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                </div>
                <div class="stat-card-label">Usuarios en el sistema</div>
            </div>
        </div>
    </div>
</div>

<script>
function toggleDropdown(dropdownId) {
    const dropdown = document.getElementById(dropdownId + '-dropdown');
    const arrow = document.getElementById(dropdownId + '-arrow');
    
    if (dropdown.style.display === 'none' || dropdown.style.display === '') {
        dropdown.style.display = 'flex';
        arrow.style.transform = 'rotate(180deg)';
    } else {
        dropdown.style.display = 'none';
        arrow.style.transform = 'rotate(0deg)';
    }
}

// Agregar efectos hover mejorados
document.addEventListener('DOMContentLoaded', function() {
    // Hover effects para los dropdown items
    const dropdownItems = document.querySelectorAll('.dropdown-item');
    dropdownItems.forEach(item => {
        item.addEventListener('mouseenter', function() {
            this.style.background = 'rgba(255, 255, 255, 0.15)';
        });
        item.addEventListener('mouseleave', function() {
            this.style.background = 'transparent';
        });
    });
    
    // Hover effects para los menu items principales (excluir Dashboard y Estadísticas que tienen estados especiales)
    const sidebarItems = document.querySelectorAll('.sidebar-item[data-estado="Default"]');
    sidebarItems.forEach(item => {
        const menuDiv = item.querySelector('div[style*="position: absolute"]');
        if (menuDiv) {
            menuDiv.addEventListener('mouseenter', function() {
                this.style.background = 'rgba(255, 255, 255, 0.1)';
            });
            menuDiv.addEventListener('mouseleave', function() {
                this.style.background = 'transparent';
            });
        }
    });
    
    // Hover effect para Estadísticas (que no es el Dashboard activo)
    const estadisticasDiv = document.querySelector('[onclick="toggleDropdown(\'estadisticas\')"]');
    if (estadisticasDiv) {
        estadisticasDiv.addEventListener('mouseenter', function() {
            // Solo aplicar hover si no tiene el fondo activo ya aplicado
            if (!this.style.background.includes('0.25')) {
                this.style.background = 'rgba(255, 255, 255, 0.15)';
            }
        });
        estadisticasDiv.addEventListener('mouseleave', function() {
            // Mantener el fondo activo si corresponde
            this.style.background = 'rgba(255, 255, 255, 0.25)';
        });
    }

    // Hover effect para Gestión de anuncios dropdown
    const gestionAnunciosDiv = document.querySelector('[onclick="toggleDropdown(\'gestion-anuncios\')"]');
    if (gestionAnunciosDiv) {
        gestionAnunciosDiv.addEventListener('mouseenter', function() {
            this.style.background = 'rgba(255, 255, 255, 0.15)';
        });
        gestionAnunciosDiv.addEventListener('mouseleave', function() {
            this.style.background = 'transparent';
        });
    }
});
</script>