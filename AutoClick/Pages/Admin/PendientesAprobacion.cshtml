@page
@model AutoClick.Pages.Admin.PendientesAprobacionModel
@{
    ViewData["Title"] = "Pendientes de Aprobación";
    Layout = "~/Pages/Shared/_Layout.cshtml";
}

<style>
    /* Reset body styles for admin dashboard */
    body {
        margin: 0;
        padding: 0;
        background: #02081C !important;
        font-family: 'Montserrat', sans-serif !important;
        overflow-x: hidden;
    }

    .main-container {
        background: #02081C !important;
        min-height: 100vh;
        position: relative;
        width: 100%;
        overflow: hidden;
    }

    /* Admin Dashboard Container */
    .admin-dashboard-container {
        width: 100%;
        min-height: 100vh;
        position: relative;
        background: #02081C;
        overflow-x: hidden;
        overflow-y: auto;
    }

    /* Main Content Area */
    .admin-main-content {
        margin-left: 396px;
        padding: 120px 40px 40px 20px;
        background: #02081C;
    }

    /* Page Title */
    .page-title {
        color: white;
        font-size: 24px;
        font-family: 'Montserrat', sans-serif;
        font-weight: 700;
        margin-bottom: 30px;
        margin-top: 0;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    /* Table Container */
    .tabla-figma-wrapper {
        max-width: 1200px;
        background: rgba(255, 255, 255, 0.15);
        border: 0.5px solid rgba(255, 255, 255, 0.25);
        border-radius: 8px;
        overflow: hidden;
        margin-bottom: 40px;
    }

    /* Table Styles */
    .tabla-figma {
        width: 100%;
        margin: 0;
        border-collapse: collapse;
    }

    .tabla-figma thead {
        background: transparent;
    }

    .tabla-figma thead th {
        color: #F7F7F7;
        font-size: 14px;
        font-family: 'Montserrat', sans-serif;
        font-weight: 700;
        text-align: left;
        padding: 15px 32px;
        border-bottom: 0.5px solid rgba(255, 255, 255, 0.25);
    }

    .tabla-figma tbody tr {
        transition: background-color 0.2s ease;
    }

    .tabla-figma tbody tr:nth-child(odd) {
        background: rgba(255, 255, 255, 0.1);
    }

    .tabla-figma tbody tr:hover {
        background: rgba(255, 147, 30, 0.1);
    }

    .tabla-figma tbody td {
        color: #F7F7F7;
        font-size: 14px;
        font-family: 'Montserrat', sans-serif;
        font-weight: 500;
        padding: 15px 32px;
    }

    /* Action Buttons */
    .action-buttons {
        display: flex;
        gap: 16px;
        align-items: center;
    }

    .btn-action {
        width: 28px;
        height: 28px;
        border-radius: 50%;
        border: none;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: opacity 0.2s ease;
    }

    .btn-action:hover {
        opacity: 0.8;
    }

    .btn-approve {
        background: #00CC00;
    }

    .btn-reject {
        background: #FF0000;
    }

    .btn-review {
        background: transparent;
        color: white;
        font-size: 12px;
        font-family: 'Montserrat', sans-serif;
        font-weight: 500;
        border: none;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 4px;
        padding: 6px 10.5px;
        transition: opacity 0.2s ease;
    }

    .btn-review:hover {
        opacity: 0.8;
    }

    /* Estilos de paginación */
    .paginacion-wrapper {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-top: 24px;
        gap: 8px;
    }

    .btn-paginacion {
        padding: 8px 16px;
        background: rgba(255, 255, 255, 0.15);
        border: 0.5px solid rgba(255, 255, 255, 0.25);
        border-radius: 8px;
        color: #F7F7F7;
        font-family: 'Montserrat', sans-serif;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
    }

    .btn-paginacion:hover:not(.disabled) {
        background: rgba(255, 147, 30, 0.2);
        border-color: #FF931E;
        transform: translateY(-2px);
    }

    .btn-paginacion.disabled {
        opacity: 0.3;
        cursor: not-allowed;
        pointer-events: none;
    }

    .paginacion-info {
        color: #F7F7F7;
        font-family: 'Montserrat', sans-serif;
        font-size: 14px;
        font-weight: 500;
        margin: 0 12px;
    }

    /* Responsive */
    @@media (max-width: 1200px) {
        .admin-sidebar {
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }

        .admin-main-content {
            margin-left: 0;
        }
    }

    /* Estilos de modales */
    .modal-detalles-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 10000;
        backdrop-filter: blur(4px);
    }

    .modal-detalles-overlay.active {
        display: flex;
    }

    .modal-detalles-content {
        background: #030D2B;
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.25);
        max-width: 600px;
        width: 90%;
        max-height: 90vh;
        overflow-y: auto;
        animation: modalSlideIn 0.3s ease;
    }

    @@keyframes modalSlideIn {
        from {
            transform: translateY(-50px);
            opacity: 0;
        }
        to {
            transform: translateY(0);
            opacity: 1;
        }
    }

    .modal-detalles-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 30px 40px 20px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.25);
    }

    .modal-detalles-title {
        color: white;
        font-size: 24px;
        font-family: 'Montserrat', sans-serif;
        font-weight: 700;
        margin: 0;
    }

    .modal-detalles-close {
        background: transparent;
        border: none;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        border-radius: 8px;
        transition: all 0.3s ease;
    }

    .modal-detalles-close:hover {
        background: rgba(255, 255, 255, 0.15);
        transform: rotate(90deg);
    }

    .modal-detalles-body {
        padding: 30px 40px;
    }

    .modal-detalles-footer {
        display: flex;
        justify-content: flex-end;
        gap: 16px;
        padding: 20px 40px;
        border-top: 1px solid rgba(255, 255, 255, 0.25);
    }

    .btn-modal-cerrar {
        padding: 12px 32px;
        background: transparent;
        border: 1px solid white;
        border-radius: 8px;
        color: white;
        font-family: 'Montserrat', sans-serif;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .btn-modal-cerrar:hover {
        background: rgba(255, 255, 255, 0.1);
    }

    .btn-modal-submit {
        padding: 12px 32px;
        background: #FF931E;
        border: none;
        border-radius: 8px;
        color: white;
        font-family: 'Montserrat', sans-serif;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .btn-modal-submit:hover {
        background: #e67e0a;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(255, 147, 30, 0.4);
    }

    .btn-modal-reject {
        padding: 12px 32px;
        background: #ff453a;
        border: none;
        border-radius: 8px;
        color: white;
        font-family: 'Montserrat', sans-serif;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .btn-modal-reject:hover {
        background: #d63027;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(255, 69, 58, 0.4);
    }
</style>

<div class="admin-dashboard-container">
    <!-- Sidebar -->
    <div style="width: 376px; height: calc(100vh - 80px); padding-left: 16px; padding-right: 16px; padding-top: 12px; padding-bottom: 12px; position: fixed; left: 0; top: 80px; background: #030D2B; overflow: hidden; border-right: 0.50px rgba(255, 255, 255, 0.25) solid; flex-direction: column; justify-content: flex-start; align-items: flex-start; display: inline-flex; z-index: 100; gap: 0;">

        <!-- Dashboard -->
        <div class="sidebar-item" data-estado="Default" style="width: 344px; height: 56px; position: relative;">
            <div style="width: 344px; height: 50px; padding-top: 14px; padding-bottom: 14px; padding-left: 16px; padding-right: 22px; left: 0px; top: 3px; position: absolute; overflow: hidden; border-radius: 2px; justify-content: flex-start; align-items: center; display: inline-flex; transition: background-color 0.2s ease;">
                <a href="/Admin/Dashboard" style="text-decoration: none; color: white; display: flex; align-items: center; gap: 8px; width: 100%;">
                    <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                        <svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
                            <path d="M0 19.2857V6.42857L9 0L18 6.42857V19.2857H11.1429V11.5714H6.85714V19.2857H0Z" fill="white"/>
                        </svg>
                        <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Dashboard</div>
                    </div>
                </a>
            </div>
        </div>

        <!-- Ingresos de la Plataforma -->
        <div class="sidebar-item" data-estado="Default" style="width: 344px; height: 56px; position: relative;">
            <div style="width: 344px; height: 50px; padding-top: 14px; padding-bottom: 14px; padding-left: 16px; padding-right: 22px; left: 0px; top: 3px; position: absolute; overflow: hidden; border-radius: 2px; justify-content: flex-start; align-items: center; display: inline-flex; transition: background-color 0.2s ease;">
                <a href="/Admin/IngresosDeLaPlataforma" style="text-decoration: none; color: white; display: flex; align-items: center; gap: 8px; width: 100%;">
                    <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                        <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
                            <path d="M0 22V14.6667H7.33333V22H0ZM0 12.4444V0H7.33333V12.4444H0ZM9.77778 22V9.77778H17.1111V22H9.77778ZM9.77778 7.55556V0H17.1111V7.55556H9.77778Z" fill="white"/>
                        </svg>
                        <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Ingresos de la plataforma</div>
                    </div>
                </a>
            </div>
        </div>

        <!-- Gestión de anuncios (Dropdown) - ACTIVE -->
        <div data-estado="desplegado" style="width: 344px; position: relative; flex-direction: column; justify-content: flex-start; align-items: flex-start; display: flex;">
            <div onclick="toggleDropdown('gestion-anuncios')" style="width: 344px; height: 50px; padding-top: 14px; padding-bottom: 14px; padding-left: 16px; padding-right: 22px; background: rgba(255, 255, 255, 0.15); overflow: hidden; border-radius: 2px; justify-content: space-between; align-items: center; display: inline-flex; cursor: pointer; transition: background-color 0.2s ease;">
                <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                    <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
                        <path d="M2 22C1.45 22 0.979167 21.8042 0.5875 21.4125C0.195833 21.0208 0 20.55 0 20V2C0 1.45 0.195833 0.979167 0.5875 0.5875C0.979167 0.195833 1.45 0 2 0H13L11 2H2V20H20V11L22 9V20C22 20.55 21.8042 21.0208 21.4125 21.4125C21.0208 21.8042 20.55 22 20 22H2ZM14.175 5.825L15.575 7.225L8.4 14.4V15.8H9.8L16.975 8.625L18.375 10.025L10.6 17.8H6.4V13.6L14.175 5.825ZM18.375 10.025L14.175 5.825L16.875 3.125C17.2583 2.74167 17.725 2.55 18.275 2.55C18.825 2.55 19.2917 2.74167 19.675 3.125L20.875 4.325C21.2583 4.70833 21.45 5.16667 21.45 5.7C21.45 6.23333 21.2583 6.69167 20.875 7.075L18.375 10.025Z" fill="white"/>
                    </svg>
                    <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Gestión de anuncios</div>
                </div>
                <svg id="gestion-anuncios-arrow" width="12" height="6" viewBox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" style="transition: transform 0.3s ease; transform: rotate(180deg);">
                    <path d="M0 0L6 6L12 0H0Z" fill="white"/>
                </svg>
            </div>
            <div id="gestion-anuncios-dropdown" style="width: 344px; flex-direction: column; justify-content: flex-start; align-items: flex-start; gap: 4px; display: flex; margin-top: 8px;">
                <div class="dropdown-item" style="width: 344px; height: 40px; padding-top: 8px; padding-bottom: 8px; padding-left: 12px; padding-right: 8px; border-radius: 4px; justify-content: flex-start; align-items: center; display: inline-flex; background: rgba(255, 255, 255, 0.25); transition: background-color 0.2s ease;">
                    <a href="/Admin/PendientesAprobacion" style="text-decoration: none; color: white; width: 100%;">
                        <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Pendientes de aprobación</div>
                    </a>
                </div>
                <div class="dropdown-item" style="width: 344px; height: 40px; padding-top: 8px; padding-bottom: 8px; padding-left: 12px; padding-right: 8px; border-radius: 4px; justify-content: flex-start; align-items: center; display: inline-flex; transition: background-color 0.2s ease;">
                    <a href="/Admin/HistorialRechazos" style="text-decoration: none; color: white; width: 100%;">
                        <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Historial de rechazos</div>
                    </a>
                </div>
                <div class="dropdown-item" style="width: 344px; height: 40px; padding-top: 8px; padding-bottom: 8px; padding-left: 12px; padding-right: 8px; border-radius: 4px; justify-content: flex-start; align-items: center; display: inline-flex; transition: background-color 0.2s ease;">
                    <a href="/Admin/PublicacionesPagadas" style="text-decoration: none; color: white; width: 100%;">
                        <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Publicaciones pagadas</div>
                    </a>
                </div>
            </div>
        </div>

        <!-- Publicidad -->
        <div class="sidebar-item" data-estado="Default" style="width: 344px; height: 56px; position: relative;">
            <div style="width: 344px; height: 50px; padding-top: 14px; padding-bottom: 14px; padding-left: 16px; padding-right: 22px; left: 0px; top: 3px; position: absolute; overflow: hidden; border-radius: 2px; justify-content: flex-start; align-items: center; display: inline-flex; transition: background-color 0.2s ease;">
                <a href="/Admin/Publicidad" style="text-decoration: none; color: white; display: flex; align-items: center; gap: 8px; width: 100%;">
                    <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                        <svg width="22" height="17" viewBox="0 0 22 17" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
                            <path d="M0 16.5V0.5H7V16.5H0ZM9 16.5V0.5H22V16.5H9Z" fill="white"/>
                        </svg>
                        <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Publicidad</div>
                    </div>
                </a>
            </div>
        </div>

        <!-- Solicitudes de fotografía -->
        <div class="sidebar-item" data-estado="Default" style="width: 344px; height: 56px; position: relative;">
            <div style="width: 344px; height: 50px; padding-top: 14px; padding-bottom: 14px; padding-left: 16px; padding-right: 22px; left: 0px; top: 3px; position: absolute; overflow: hidden; border-radius: 2px; justify-content: flex-start; align-items: center; display: inline-flex; transition: background-color 0.2s ease;">
                <a href="/Admin/SolicitudesFotografia" style="text-decoration: none; color: white; display: flex; align-items: center; gap: 8px; width: 100%;">
                    <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                        <svg width="22" height="17" viewBox="0 0 22 17" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
                            <path d="M2 16.794C1.45 16.794 0.979167 16.5982 0.5875 16.2065C0.195833 15.8149 0 15.344 0 14.794V2.794C0 2.244 0.195833 1.77317 0.5875 1.3815C0.979167 0.989834 1.45 0.794006 2 0.794006H6.15L8 2.794H20C20.55 2.794 21.0208 2.98984 21.4125 3.3815C21.8042 3.77317 22 4.244 22 4.794V14.794C22 15.344 21.8042 15.8149 21.4125 16.2065C21.0208 16.5982 20.55 16.794 20 16.794H2ZM11 14.794C12.3833 14.794 13.5625 14.3232 14.5375 13.3815C15.5125 12.4399 16 11.2773 16 9.89401C16 8.51067 15.5125 7.34817 14.5375 6.4065C13.5625 5.46484 12.3833 4.99401 11 4.99401C9.61667 4.99401 8.4375 5.46484 7.4625 6.4065C6.4875 7.34817 6 8.51067 6 9.89401C6 11.2773 6.4875 12.4399 7.4625 13.3815C8.4375 14.3232 9.61667 14.794 11 14.794Z" fill="white"/>
                        </svg>
                        <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Solicitudes de fotografía</div>
                    </div>
                </a>
            </div>
        </div>

        <!-- Centro de soporte -->
        <div class="sidebar-item" data-estado="Default" style="width: 344px; height: 56px; position: relative;">
            <div style="width: 344px; height: 50px; padding-top: 14px; padding-bottom: 14px; padding-left: 16px; padding-right: 22px; left: 0px; top: 3px; position: absolute; overflow: hidden; border-radius: 2px; justify-content: flex-start; align-items: center; display: inline-flex; transition: background-color 0.2s ease;">
                <a href="/Admin/CentroDeSoporte" style="text-decoration: none; color: white; display: flex; align-items: center; gap: 8px; width: 100%;">
                    <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                        <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
                            <path d="M11 22C9.61667 22 8.31667 21.7375 7.1 21.2125C5.88333 20.6875 4.825 19.975 3.925 19.075C3.025 18.175 2.3125 17.1167 1.7875 15.9C1.2625 14.6833 1 13.3833 1 12C1 10.6167 1.2625 9.31667 1.7875 8.1C2.3125 6.88333 3.025 5.825 3.925 4.925C4.825 4.025 5.88333 3.3125 7.1 2.7875C8.31667 2.2625 9.61667 2 11 2C12.05 2 13.0542 2.15417 14.0125 2.4625C14.9708 2.77083 15.8667 3.21667 16.7 3.8L15.3 5.2C14.65 4.75 13.9458 4.39583 13.1875 4.1375C12.4292 3.87917 11.6333 3.75 10.8 3.75C8.56667 3.75 6.66667 4.52083 5.1 6.0625C3.53333 7.60417 2.75 9.5 2.75 11.75C2.75 14 3.52917 15.9042 5.0875 17.4625C6.64583 19.0208 8.55 19.8 10.8 19.8C13.05 19.8 14.9542 19.0208 16.5125 17.4625C18.0708 15.9042 18.85 14 18.85 11.75V11.2H14.7V9.3H20.6V11.75C20.6 13.1333 20.3375 14.4333 19.8125 15.65C19.2875 16.8667 18.575 17.925 17.675 18.825C16.775 19.725 15.7167 20.4375 14.5 20.9625C13.2833 21.4875 11.9833 21.75 10.6 21.75L11 22Z" fill="white"/>
                        </svg>
                        <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Centro de soporte</div>
                    </div>
                </a>
            </div>
        </div>

        <!-- Solicitudes de Pre-aprobación -->
        <div class="sidebar-item" data-estado="Default" style="width: 344px; height: 56px; position: relative;">
            <div style="width: 344px; height: 50px; padding-top: 14px; padding-bottom: 14px; padding-left: 16px; padding-right: 22px; left: 0px; top: 3px; position: absolute; overflow: hidden; border-radius: 2px; justify-content: flex-start; align-items: center; display: inline-flex; transition: background-color 0.2s ease;">
                <a href="/Admin/SolicitudesPreAprobaciones" style="text-decoration: none; color: white; display: flex; align-items: center; gap: 8px; width: 100%;">
                    <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                        <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
                            <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                        </svg>
                        <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Solicitudes de Pre-aprobación</div>
                    </div>
                </a>
            </div>
        </div>

        <!-- Importar Ventas Externas -->
        <div class="sidebar-item" data-estado="Default" style="width: 344px; height: 56px; position: relative;">
            <div style="width: 344px; height: 50px; padding-top: 14px; padding-bottom: 14px; padding-left: 16px; padding-right: 22px; left: 0px; top: 3px; position: absolute; overflow: hidden; border-radius: 2px; justify-content: flex-start; align-items: center; display: inline-flex; transition: background-color 0.2s ease;">
                <a href="/Admin/ImportarVentasExternas" style="text-decoration: none; color: white; display: flex; align-items: center; gap: 8px; width: 100%;">
                    <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                        <svg width="22" height="18" viewBox="0 0 22 18" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
                            <path d="M2 18C1.45 18 0.979167 17.8042 0.5875 17.4125C0.195833 17.0208 0 16.55 0 16V2C0 1.45 0.195833 0.979167 0.5875 0.5875C0.979167 0.195833 1.45 0 2 0H9L11 2H20C20.55 2 21.0208 2.19583 21.4125 2.5875C21.8042 2.97917 22 3.45 22 4V16C22 16.55 21.8042 17.0208 21.4125 17.4125C21.0208 17.8042 20.55 18 20 18H2ZM2 2V16H20V4H10.175L8.175 2H2ZM8 14H14V12H8V14ZM8 10H14V8H8V10Z" fill="white"/>
                        </svg>
                        <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Importar Ventas Externas</div>
                    </div>
                </a>
            </div>
        </div>

    </div>

    <!-- Main Content -->
    <div class="admin-main-content">
        <!-- Page Title -->
        <h1 class="page-title">
            Pendientes de aprobación
        </h1>

        <!-- Table -->
        <div class="tabla-figma-wrapper">
            <table class="tabla-figma">
                <thead>
                    <tr>
                        <th>Código</th>
                        <th>Título</th>
                        <th>Fecha</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody id="pending-table-body">
                    @foreach(var item in Model.PendingApprovals)
                    {
                        <tr data-auto-id="@item.Id">
                            <td>@item.Code</td>
                            <td>@item.Title</td>
                            <td>@item.Date</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="btn-action btn-approve" 
                                            title="Aprobar" 
                                            data-id="@item.Id" 
                                            data-title="@item.Title"
                                            onclick="approveItem(this)">
                                        <svg width="18" height="14" viewBox="0 0 18 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M6 11.17L1.83 7L0.410004 8.41L6 14L18 2L16.59 0.589996L6 11.17Z" fill="white"/>
                                        </svg>
                                    </button>
                                    <button class="btn-action btn-reject" 
                                            title="Rechazar" 
                                            data-id="@item.Id" 
                                            data-title="@item.Title"
                                            onclick="rejectItem(this)">
                                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z" fill="white"/>
                                        </svg>
                                    </button>
                                    <button class="btn-review" onclick="reviewItem(@item.Id)">
                                        Revisar
                                        <svg width="9" height="5" viewBox="0 0 9 5" fill="none" xmlns="http://www.w3.org/2000/svg" style="transform: rotate(-90deg);">
                                            <path d="M0 0L4.5 4.5L9 0H0Z" fill="white"/>
                                        </svg>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

        <!-- Paginación -->
        @if (Model.TotalPaginas > 1)
        {
            <div class="paginacion-wrapper">
                <a href="?PaginaActual=@(Model.PaginaActual - 1)" 
                   class="btn-paginacion @(Model.PaginaActual <= 1 ? "disabled" : "")">
                    Anterior
                </a>
                
                <span class="paginacion-info">
                    Página @Model.PaginaActual de @Model.TotalPaginas
                </span>
                
                <a href="?PaginaActual=@(Model.PaginaActual + 1)" 
                   class="btn-paginacion @(Model.PaginaActual >= Model.TotalPaginas ? "disabled" : "")">
                    Siguiente
                </a>
            </div>
        }
    </div>
</div>

<!-- Modal de Confirmación para Aprobar -->
<div id="modalConfirmarAprobar" class="modal-detalles-overlay" onclick="cerrarModalConfirmarAprobar(event)">
    <div class="modal-detalles-content" onclick="event.stopPropagation()" style="max-width: 500px;">
        <div class="modal-detalles-header">
            <h2 class="modal-detalles-title">✅ Confirmar aprobación</h2>
            <button type="button" class="modal-detalles-close" onclick="cerrarModalConfirmarAprobar()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M18 6L6 18M6 6L18 18" stroke="white" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
        </div>

        <div class="modal-detalles-body">
            <p style="color: white; font-size: 16px; line-height: 1.5; margin: 0 0 16px 0;">
                ¿Está seguro de que desea <strong style="color: #FF931E;">aprobar este anuncio</strong>?
            </p>
            <p id="tituloAnuncioAprobar" style="color: rgba(255, 255, 255, 0.7); font-size: 14px; line-height: 1.5; margin: 0;">
                <!-- El título se insertará aquí -->
            </p>
        </div>

        <div class="modal-detalles-footer">
            <button type="button" class="btn-modal-cerrar" onclick="cerrarModalConfirmarAprobar()">
                Cancelar
            </button>
            <button type="button" class="btn-modal-submit" onclick="confirmarAprobacion()">
                Sí, aprobar
            </button>
        </div>
    </div>
</div>

<!-- Modal de Confirmación para Rechazar -->
<div id="modalConfirmarRechazar" class="modal-detalles-overlay" onclick="cerrarModalConfirmarRechazar(event)">
    <div class="modal-detalles-content" onclick="event.stopPropagation()" style="max-width: 500px;">
        <div class="modal-detalles-header">
            <h2 class="modal-detalles-title">⚠️ Confirmar rechazo</h2>
            <button type="button" class="modal-detalles-close" onclick="cerrarModalConfirmarRechazar()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M18 6L6 18M6 6L18 18" stroke="white" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
        </div>

        <div class="modal-detalles-body">
            <p style="color: white; font-size: 16px; line-height: 1.5; margin: 0 0 16px 0;">
                ¿Está seguro de que desea <strong style="color: #ff453a;">rechazar este anuncio</strong>?
            </p>
            <p id="tituloAnuncioRechazar" style="color: rgba(255, 255, 255, 0.7); font-size: 14px; line-height: 1.5; margin: 0 0 16px 0;">
                <!-- El título se insertará aquí -->
            </p>
            <p style="color: rgba(255, 255, 255, 0.7); font-size: 14px; line-height: 1.5; margin: 0;">
                <strong>El anuncio será marcado como rechazado</strong> y aparecerá en el historial de rechazos.
            </p>
        </div>

        <div class="modal-detalles-footer">
            <button type="button" class="btn-modal-cerrar" onclick="cerrarModalConfirmarRechazar()">
                Cancelar
            </button>
            <button type="button" class="btn-modal-reject" onclick="confirmarRechazo()">
                Sí, rechazar
            </button>
        </div>
    </div>
</div>

<!-- Modal de Éxito -->
<div id="modalExito" class="modal-detalles-overlay" onclick="cerrarModalExito(event)">
    <div class="modal-detalles-content" onclick="event.stopPropagation()" style="max-width: 500px;">
        <div class="modal-detalles-header">
            <h2 id="modalExitoTitle" class="modal-detalles-title">✅ ¡Operación exitosa!</h2>
            <button type="button" class="modal-detalles-close" onclick="cerrarModalExito()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M18 6L6 18M6 6L18 18" stroke="white" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
        </div>

        <div class="modal-detalles-body">
            <p id="modalExitoMessage" style="color: white; font-size: 16px; line-height: 1.5; margin: 0; text-align: center;">
                <!-- El mensaje se insertará aquí -->
            </p>
        </div>

        <div class="modal-detalles-footer" style="justify-content: center;">
            <button type="button" class="btn-modal-submit" onclick="cerrarModalExito()">
                Cerrar
            </button>
        </div>
    </div>
</div>

<script>
// Variables globales para almacenar el ID y título del anuncio a procesar
let anuncioIdProcesar = null;
let anuncioTituloProcesar = '';
let accionTipo = ''; // 'aprobar' o 'rechazar'

function toggleDropdown(dropdownId) {
    const dropdown = document.getElementById(dropdownId + '-dropdown');
    const arrow = document.getElementById(dropdownId + '-arrow');

    if (dropdown.style.display === 'none' || dropdown.style.display === '') {
        dropdown.style.display = 'flex';
        arrow.style.transform = 'rotate(180deg)';
    } else {
        dropdown.style.display = 'none';
        arrow.style.transform = 'rotate(0deg)';
    }
}

// Funciones para modal de confirmación de aprobación
function abrirModalConfirmarAprobar(id, title) {
    anuncioIdProcesar = id;
    anuncioTituloProcesar = title;
    accionTipo = 'aprobar';
    document.getElementById('tituloAnuncioAprobar').textContent = title;
    document.getElementById('modalConfirmarAprobar').classList.add('active');
}

function cerrarModalConfirmarAprobar(event) {
    if (event && event.target.id !== 'modalConfirmarAprobar') {
        return;
    }
    document.getElementById('modalConfirmarAprobar').classList.remove('active');
    anuncioIdProcesar = null;
    anuncioTituloProcesar = '';
}

// Funciones para modal de confirmación de rechazo
function abrirModalConfirmarRechazar(id, title) {
    anuncioIdProcesar = id;
    anuncioTituloProcesar = title;
    accionTipo = 'rechazar';
    document.getElementById('tituloAnuncioRechazar').textContent = title;
    document.getElementById('modalConfirmarRechazar').classList.add('active');
}

function cerrarModalConfirmarRechazar(event) {
    if (event && event.target.id !== 'modalConfirmarRechazar') {
        return;
    }
    document.getElementById('modalConfirmarRechazar').classList.remove('active');
    anuncioIdProcesar = null;
    anuncioTituloProcesar = '';
}

// Funciones para modal de éxito
function mostrarModalExito(title, message) {
    document.getElementById('modalExitoTitle').textContent = title;
    document.getElementById('modalExitoMessage').textContent = message;
    document.getElementById('modalExito').classList.add('active');
}

function cerrarModalExito(event) {
    if (event && event.target.id !== 'modalExito') {
        return;
    }
    document.getElementById('modalExito').classList.remove('active');
}

// Confirmar aprobación
async function confirmarAprobacion() {
    if (!anuncioIdProcesar) {
        alert('Error: No se pudo identificar el anuncio a aprobar');
        return;
    }

    // Guardar el ID antes de cerrar el modal
    const idAaprobar = anuncioIdProcesar;
    
    // Cerrar el modal de confirmación
    document.getElementById('modalConfirmarAprobar').classList.remove('active');

    try {
        const url = '/api/admin/AdminApproval/approve/' + idAaprobar;
        
        const response = await fetch(url, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            }
        });

        if (!response.ok) {
            throw new Error('HTTP error! status: ' + response.status);
        }

        const data = await response.json();

        if (data.success) {
            // Remover la fila de la tabla
            const row = document.querySelector('tr[data-auto-id="' + idAaprobar + '"]');
            if (row) {
                row.style.opacity = '0';
                setTimeout(() => row.remove(), 300);
            }

            // Mostrar modal de éxito
            mostrarModalExito('✅ ¡Anuncio Aprobado!', 'El anuncio "' + data.title + '" fue aprobado exitosamente.');
            
            // Limpiar variables
            anuncioIdProcesar = null;
            anuncioTituloProcesar = '';
        } else {
            alert(data.message || 'Error al aprobar el anuncio');
        }
    } catch (error) {
        alert('Error al aprobar el anuncio. Por favor, intente nuevamente.');
    }
}

// Confirmar rechazo
async function confirmarRechazo() {
    if (!anuncioIdProcesar) {
        alert('Error: No se pudo identificar el anuncio a rechazar');
        return;
    }

    // Guardar el ID antes de cerrar el modal
    const idArechazar = anuncioIdProcesar;
    
    // Cerrar el modal de confirmación
    document.getElementById('modalConfirmarRechazar').classList.remove('active');

    try {
        const url = '/api/admin/AdminApproval/reject/' + idArechazar;
        
        const response = await fetch(url, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            }
        });

        if (!response.ok) {
            throw new Error('HTTP error! status: ' + response.status);
        }

        const data = await response.json();

        if (data.success) {
            // Remover la fila de la tabla
            const row = document.querySelector('tr[data-auto-id="' + idArechazar + '"]');
            if (row) {
                row.style.opacity = '0';
                setTimeout(() => row.remove(), 300);
            }

            // Mostrar modal de éxito
            mostrarModalExito('⚠️ Anuncio Rechazado', 'El anuncio "' + data.title + '" fue rechazado y movido al historial.');
            
            // Limpiar variables
            anuncioIdProcesar = null;
            anuncioTituloProcesar = '';
        } else {
            alert(data.message || 'Error al rechazar el anuncio');
        }
    } catch (error) {
        alert('Error al rechazar el anuncio. Por favor, intente nuevamente.');
    }
    anuncioTituloProcesar = '';
}

// Funciones públicas para los botones
function approveItem(button) {
    const id = parseInt(button.getAttribute('data-id'));
    const title = button.getAttribute('data-title');
    abrirModalConfirmarAprobar(id, title);
}

function rejectItem(button) {
    const id = parseInt(button.getAttribute('data-id'));
    const title = button.getAttribute('data-title');
    abrirModalConfirmarRechazar(id, title);
}

function reviewItem(id) {
    window.location.href = `/producto/${id}`;
}

// Agregar efectos hover
document.addEventListener('DOMContentLoaded', function() {
    // Hover effects para los dropdown items
    const dropdownItems = document.querySelectorAll('.dropdown-item');
    dropdownItems.forEach(item => {
        item.addEventListener('mouseenter', function() {
            // No aplicar hover si ya está activo (tiene fondo 0.25)
            if (!this.style.background.includes('0.25')) {
                this.style.background = 'rgba(255, 255, 255, 0.15)';
            }
        });
        item.addEventListener('mouseleave', function() {
            // Mantener el fondo activo si corresponde
            if (!this.querySelector('a').href.includes('PendientesAprobacion')) {
                this.style.background = 'transparent';
            }
        });
    });

    // Hover effects para los menu items principales
    const sidebarItems = document.querySelectorAll('.sidebar-item[data-estado="Default"]');
    sidebarItems.forEach(item => {
        const menuDiv = item.querySelector('div[style*="position: absolute"]');
        if (menuDiv) {
            menuDiv.addEventListener('mouseenter', function() {
                this.style.background = 'rgba(255, 255, 255, 0.1)';
            });
            menuDiv.addEventListener('mouseleave', function() {
                this.style.background = 'transparent';
            });
        }
    });

    // Hover effect para Estadísticas dropdown
    const estadisticasDiv = document.querySelector('[onclick="toggleDropdown(\'estadisticas\')"]');
    if (estadisticasDiv) {
        estadisticasDiv.addEventListener('mouseenter', function() {
            this.style.background = 'rgba(255, 255, 255, 0.15)';
        });
        estadisticasDiv.addEventListener('mouseleave', function() {
            this.style.background = 'transparent';
        });
    }

    // Hover effect para Gestión de anuncios dropdown (mantener activo)
    const gestionAnunciosDiv = document.querySelector('[onclick="toggleDropdown(\'gestion-anuncios\')"]');
    if (gestionAnunciosDiv) {
        gestionAnunciosDiv.addEventListener('mouseenter', function() {
            this.style.background = 'rgba(255, 255, 255, 0.2)';
        });
        gestionAnunciosDiv.addEventListener('mouseleave', function() {
            this.style.background = 'rgba(255, 255, 255, 0.15)';
        });
    }

    // Agregar transición de opacidad a las filas
    const rows = document.querySelectorAll('tbody tr');
    rows.forEach(row => {
        row.style.transition = 'opacity 0.3s ease';
    });

    // Manejar tecla ESC para cerrar modales
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
            const modalAprobar = document.getElementById('modalConfirmarAprobar');
            const modalRechazar = document.getElementById('modalConfirmarRechazar');
            const modalExito = document.getElementById('modalExito');

            if (modalAprobar && modalAprobar.classList.contains('active')) {
                cerrarModalConfirmarAprobar();
            }
            if (modalRechazar && modalRechazar.classList.contains('active')) {
                cerrarModalConfirmarRechazar();
            }
            if (modalExito && modalExito.classList.contains('active')) {
                cerrarModalExito();
            }
        }
    });
});
</script>
