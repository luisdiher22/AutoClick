@page
@model AutoClick.Pages.Admin.PendientesAprobacionModel
@{
    ViewData["Title"] = "Pendientes de Aprobación";
    Layout = "~/Pages/Shared/_Layout.cshtml";
}

<style>
    /* Reset body styles for admin dashboard */
    body {
        margin: 0;
        padding: 0;
        background: #02081C !important;
        font-family: 'Montserrat', sans-serif !important;
        overflow-x: hidden;
    }

    .main-container {
        background: #02081C !important;
        min-height: 100vh;
        position: relative;
        width: 100%;
        overflow: hidden;
    }

    /* Admin Dashboard Container */
    .admin-dashboard-container {
        width: 100%;
        min-height: 100vh;
        position: relative;
        background: #02081C;
        overflow-x: hidden;
        overflow-y: auto;
    }

    /* Main Content Area */
    .admin-main-content {
        margin-left: 376px;
        padding: 40px;
        padding-bottom: 0;
        background: #02081C;
    }

    /* Page Title */
    .page-title {
        color: white;
        font-size: 24px;
        font-family: 'Montserrat', sans-serif;
        font-weight: 700;
        margin-bottom: 24px;
        margin-top: 32px;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    /* Table Container */
    .table-container {
        width: 100%;
        background: rgba(255, 255, 255, 0.15);
        border-radius: 8px;
        border: 0.5px solid rgba(255, 255, 255, 0.25);
        padding: 32px;
        overflow-x: auto;
    }

    /* Table Styles */
    .approval-table {
        width: 100%;
        border-collapse: collapse;
    }

    .approval-table thead th {
        color: #F7F7F7;
        font-size: 14px;
        font-family: 'Montserrat', sans-serif;
        font-weight: 700;
        text-align: left;
        padding-bottom: 40px;
    }

    .approval-table tbody tr {
        border-top: 0.5px solid rgba(255, 255, 255, 0.25);
        height: 54px;
    }

    .approval-table tbody tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.1);
    }

    .approval-table tbody td {
        color: #F7F7F7;
        font-size: 14px;
        font-family: 'Montserrat', sans-serif;
        font-weight: 500;
        padding: 15px 0;
    }

    /* Action Buttons */
    .action-buttons {
        display: flex;
        gap: 16px;
        align-items: center;
    }

    .btn-action {
        width: 28px;
        height: 28px;
        border-radius: 50%;
        border: none;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: opacity 0.2s ease;
    }

    .btn-action:hover {
        opacity: 0.8;
    }

    .btn-approve {
        background: #00CC00;
    }

    .btn-reject {
        background: #FF0000;
    }

    .btn-review {
        background: transparent;
        color: white;
        font-size: 12px;
        font-family: 'Montserrat', sans-serif;
        font-weight: 500;
        border: none;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 4px;
        padding: 6px 10.5px;
        transition: opacity 0.2s ease;
    }

    .btn-review:hover {
        opacity: 0.8;
    }

    /* Responsive */
    @@media (max-width: 1200px) {
        .admin-sidebar {
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }

        .admin-main-content {
            margin-left: 0;
        }
    }
</style>

<div class="admin-dashboard-container">
    <!-- Sidebar -->
    <div style="width: 376px; height: calc(100vh - 80px); padding-left: 16px; padding-right: 16px; padding-top: 12px; padding-bottom: 12px; position: fixed; left: 0; top: 80px; background: #030D2B; overflow: hidden; border-right: 0.50px rgba(255, 255, 255, 0.25) solid; flex-direction: column; justify-content: flex-start; align-items: flex-start; display: inline-flex; z-index: 100; gap: 0;">

        <!-- Dashboard -->
        <div class="sidebar-item" data-estado="Default" style="width: 344px; height: 56px; position: relative;">
            <div style="width: 344px; height: 50px; padding-top: 14px; padding-bottom: 14px; padding-left: 16px; padding-right: 22px; left: 0px; top: 3px; position: absolute; overflow: hidden; border-radius: 2px; justify-content: flex-start; align-items: center; display: inline-flex; transition: background-color 0.2s ease;">
                <a href="/Admin/Dashboard" style="text-decoration: none; color: white; display: flex; align-items: center; gap: 8px; width: 100%;">
                    <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                        <svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
                            <path d="M0 19.2857V6.42857L9 0L18 6.42857V19.2857H11.1429V11.5714H6.85714V19.2857H0Z" fill="white"/>
                        </svg>
                        <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Dashboard</div>
                    </div>
                </a>
            </div>
        </div>

        <!-- Estadísticas -->
        <div data-estado="Default" style="width: 344px; position: relative; flex-direction: column; justify-content: flex-start; align-items: flex-start; display: flex;">
            <div onclick="toggleDropdown('estadisticas')" style="width: 344px; height: 50px; padding-top: 14px; padding-bottom: 14px; padding-left: 16px; padding-right: 22px; overflow: hidden; border-radius: 2px; justify-content: space-between; align-items: center; display: inline-flex; cursor: pointer; transition: background-color 0.2s ease;">
                <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                    <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
                        <path d="M0 22V14.6667H7.33333V22H0ZM0 12.4444V0H7.33333V12.4444H0ZM9.77778 22V9.77778H17.1111V22H9.77778ZM9.77778 7.55556V0H17.1111V7.55556H9.77778Z" fill="white"/>
                    </svg>
                    <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Estadísticas</div>
                </div>
                <svg id="estadisticas-arrow" width="12" height="6" viewBox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" style="transition: transform 0.3s ease;">
                    <path d="M0 0L6 6L12 0H0Z" fill="white"/>
                </svg>
            </div>
            <div id="estadisticas-dropdown" style="width: 344px; flex-direction: column; justify-content: flex-start; align-items: flex-start; gap: 4px; display: none; margin-top: 8px;">
                <div class="dropdown-item" style="width: 344px; height: 40px; padding-top: 8px; padding-bottom: 8px; padding-left: 12px; padding-right: 8px; border-radius: 4px; justify-content: flex-start; align-items: center; display: inline-flex; transition: background-color 0.2s ease;">
                    <a href="/Admin/VisitasMensuales" style="text-decoration: none; color: white; width: 100%;">
                        <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Visitas mensuales</div>
                    </a>
                </div>
                <div class="dropdown-item" style="width: 344px; height: 40px; padding-top: 8px; padding-bottom: 8px; padding-left: 12px; padding-right: 8px; border-radius: 4px; justify-content: flex-start; align-items: center; display: inline-flex; transition: background-color 0.2s ease;">
                    <a href="/Admin/IngresosDeLaPlataforma" style="text-decoration: none; color: white; width: 100%;">
                        <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Ingresos de la plataforma</div>
                    </a>
                </div>
            </div>
        </div>

        <!-- Gestión de anuncios (Dropdown) - ACTIVE -->
        <div data-estado="desplegado" style="width: 344px; position: relative; flex-direction: column; justify-content: flex-start; align-items: flex-start; display: flex;">
            <div onclick="toggleDropdown('gestion-anuncios')" style="width: 344px; height: 50px; padding-top: 14px; padding-bottom: 14px; padding-left: 16px; padding-right: 22px; background: rgba(255, 255, 255, 0.15); overflow: hidden; border-radius: 2px; justify-content: space-between; align-items: center; display: inline-flex; cursor: pointer; transition: background-color 0.2s ease;">
                <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                    <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
                        <path d="M2 22C1.45 22 0.979167 21.8042 0.5875 21.4125C0.195833 21.0208 0 20.55 0 20V2C0 1.45 0.195833 0.979167 0.5875 0.5875C0.979167 0.195833 1.45 0 2 0H13L11 2H2V20H20V11L22 9V20C22 20.55 21.8042 21.0208 21.4125 21.4125C21.0208 21.8042 20.55 22 20 22H2ZM14.175 5.825L15.575 7.225L8.4 14.4V15.8H9.8L16.975 8.625L18.375 10.025L10.6 17.8H6.4V13.6L14.175 5.825ZM18.375 10.025L14.175 5.825L16.875 3.125C17.2583 2.74167 17.725 2.55 18.275 2.55C18.825 2.55 19.2917 2.74167 19.675 3.125L20.875 4.325C21.2583 4.70833 21.45 5.16667 21.45 5.7C21.45 6.23333 21.2583 6.69167 20.875 7.075L18.375 10.025Z" fill="white"/>
                    </svg>
                    <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Gestión de anuncios</div>
                </div>
                <svg id="gestion-anuncios-arrow" width="12" height="6" viewBox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" style="transition: transform 0.3s ease; transform: rotate(180deg);">
                    <path d="M0 0L6 6L12 0H0Z" fill="white"/>
                </svg>
            </div>
            <div id="gestion-anuncios-dropdown" style="width: 344px; flex-direction: column; justify-content: flex-start; align-items: flex-start; gap: 4px; display: flex; margin-top: 8px;">
                <div class="dropdown-item" style="width: 344px; height: 40px; padding-top: 8px; padding-bottom: 8px; padding-left: 12px; padding-right: 8px; border-radius: 4px; justify-content: flex-start; align-items: center; display: inline-flex; background: rgba(255, 255, 255, 0.25); transition: background-color 0.2s ease;">
                    <a href="/Admin/PendientesAprobacion" style="text-decoration: none; color: white; width: 100%;">
                        <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Pendientes de aprobación</div>
                    </a>
                </div>
                <div class="dropdown-item" style="width: 344px; height: 40px; padding-top: 8px; padding-bottom: 8px; padding-left: 12px; padding-right: 8px; border-radius: 4px; justify-content: flex-start; align-items: center; display: inline-flex; transition: background-color 0.2s ease;">
                    <a href="/Admin/HistorialRechazos" style="text-decoration: none; color: white; width: 100%;">
                        <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Historial de rechazos</div>
                    </a>
                </div>
                <div class="dropdown-item" style="width: 344px; height: 40px; padding-top: 8px; padding-bottom: 8px; padding-left: 12px; padding-right: 8px; border-radius: 4px; justify-content: flex-start; align-items: center; display: inline-flex; transition: background-color 0.2s ease;">
                    <a href="/Admin/PublicacionesPagadas" style="text-decoration: none; color: white; width: 100%;">
                        <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Publicaciones pagadas</div>
                    </a>
                </div>
            </div>
        </div>

        <!-- Publicidad -->
        <div class="sidebar-item" data-estado="Default" style="width: 344px; height: 56px; position: relative;">
            <div style="width: 344px; height: 50px; padding-top: 14px; padding-bottom: 14px; padding-left: 16px; padding-right: 22px; left: 0px; top: 3px; position: absolute; overflow: hidden; border-radius: 2px; justify-content: flex-start; align-items: center; display: inline-flex; transition: background-color 0.2s ease;">
                <a href="/Admin/Publicidad" style="text-decoration: none; color: white; display: flex; align-items: center; gap: 8px; width: 100%;">
                    <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                        <svg width="22" height="17" viewBox="0 0 22 17" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
                            <path d="M0 16.5V0.5H7V16.5H0ZM9 16.5V0.5H22V16.5H9Z" fill="white"/>
                        </svg>
                        <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Publicidad</div>
                    </div>
                </a>
            </div>
        </div>

        <!-- Solicitudes de fotografía -->
        <div class="sidebar-item" data-estado="Default" style="width: 344px; height: 56px; position: relative;">
            <div style="width: 344px; height: 50px; padding-top: 14px; padding-bottom: 14px; padding-left: 16px; padding-right: 22px; left: 0px; top: 3px; position: absolute; overflow: hidden; border-radius: 2px; justify-content: flex-start; align-items: center; display: inline-flex; transition: background-color 0.2s ease;">
                <a href="/Admin/SolicitudesFotografia" style="text-decoration: none; color: white; display: flex; align-items: center; gap: 8px; width: 100%;">
                    <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                        <svg width="22" height="17" viewBox="0 0 22 17" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
                            <path d="M2 16.794C1.45 16.794 0.979167 16.5982 0.5875 16.2065C0.195833 15.8149 0 15.344 0 14.794V2.794C0 2.244 0.195833 1.77317 0.5875 1.3815C0.979167 0.989834 1.45 0.794006 2 0.794006H6.15L8 2.794H20C20.55 2.794 21.0208 2.98984 21.4125 3.3815C21.8042 3.77317 22 4.244 22 4.794V14.794C22 15.344 21.8042 15.8149 21.4125 16.2065C21.0208 16.5982 20.55 16.794 20 16.794H2ZM11 14.794C12.3833 14.794 13.5625 14.3232 14.5375 13.3815C15.5125 12.4399 16 11.2773 16 9.89401C16 8.51067 15.5125 7.34817 14.5375 6.4065C13.5625 5.46484 12.3833 4.99401 11 4.99401C9.61667 4.99401 8.4375 5.46484 7.4625 6.4065C6.4875 7.34817 6 8.51067 6 9.89401C6 11.2773 6.4875 12.4399 7.4625 13.3815C8.4375 14.3232 9.61667 14.794 11 14.794Z" fill="white"/>
                        </svg>
                        <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Solicitudes de fotografía</div>
                    </div>
                </a>
            </div>
        </div>

        <!-- Reportes del sistema -->
        <div class="sidebar-item" data-estado="Default" style="width: 344px; height: 56px; position: relative;">
            <div style="width: 344px; height: 50px; padding-top: 14px; padding-bottom: 14px; padding-left: 16px; padding-right: 22px; left: 0px; top: 3px; position: absolute; overflow: hidden; border-radius: 2px; justify-content: space-between; align-items: center; display: inline-flex; transition: background-color 0.2s ease;">
                <a href="/Admin/Reportes" style="text-decoration: none; color: white; display: flex; align-items: center; gap: 8px; width: 100%;">
                    <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                        <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
                            <path d="M2 22C1.45 22 0.979167 21.8042 0.5875 21.4125C0.195833 21.0208 0 20.55 0 20V2C0 1.45 0.195833 0.979167 0.5875 0.5875C0.979167 0.195833 1.45 0 2 0H20C20.55 0 21.0208 0.195833 21.4125 0.5875C21.8042 0.979167 22 1.45 22 2V20C22 20.55 21.8042 21.0208 21.4125 21.4125C21.0208 21.8042 20.55 22 20 22H2ZM2 20H20V2H2V20ZM4 18H11V16H4V18ZM13 18H18V13H13V18ZM4 14H11V12H4V14ZM4 10H11V8H4V10ZM13 11H18V4H13V11Z" fill="white"/>
                        </svg>
                        <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Reportes del sistema</div>
                    </div>
                </a>
                <svg width="12" height="6" viewBox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
                    <path d="M0 0L6 6L12 0H0Z" fill="white"/>
                </svg>
            </div>
        </div>

        <!-- Centro de soporte -->
        <div class="sidebar-item" data-estado="Default" style="width: 344px; height: 56px; position: relative;">
            <div style="width: 344px; height: 50px; padding-top: 14px; padding-bottom: 14px; padding-left: 16px; padding-right: 22px; left: 0px; top: 3px; position: absolute; overflow: hidden; border-radius: 2px; justify-content: space-between; align-items: center; display: inline-flex; transition: background-color 0.2s ease;">
                <a href="/Admin/CentroDeSoporte" style="text-decoration: none; color: white; display: flex; align-items: center; gap: 8px; width: 100%;">
                    <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                        <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
                            <path d="M11 22C9.61667 22 8.31667 21.7375 7.1 21.2125C5.88333 20.6875 4.825 19.975 3.925 19.075C3.025 18.175 2.3125 17.1167 1.7875 15.9C1.2625 14.6833 1 13.3833 1 12C1 10.6167 1.2625 9.31667 1.7875 8.1C2.3125 6.88333 3.025 5.825 3.925 4.925C4.825 4.025 5.88333 3.3125 7.1 2.7875C8.31667 2.2625 9.61667 2 11 2C12.05 2 13.0542 2.15417 14.0125 2.4625C14.9708 2.77083 15.8667 3.21667 16.7 3.8L15.3 5.2C14.65 4.75 13.9458 4.39583 13.1875 4.1375C12.4292 3.87917 11.6333 3.75 10.8 3.75C8.56667 3.75 6.66667 4.52083 5.1 6.0625C3.53333 7.60417 2.75 9.5 2.75 11.75C2.75 14 3.52917 15.9042 5.0875 17.4625C6.64583 19.0208 8.55 19.8 10.8 19.8C13.05 19.8 14.9542 19.0208 16.5125 17.4625C18.0708 15.9042 18.85 14 18.85 11.75V11.2H14.7V9.3H20.6V11.75C20.6 13.1333 20.3375 14.4333 19.8125 15.65C19.2875 16.8667 18.575 17.925 17.675 18.825C16.775 19.725 15.7167 20.4375 14.5 20.9625C13.2833 21.4875 11.9833 21.75 10.6 21.75L11 22Z" fill="white"/>
                        </svg>
                        <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Centro de soporte</div>
                    </div>
                </a>
                <svg width="12" height="6" viewBox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
                    <path d="M0 0L6 6L12 0H0Z" fill="white"/>
                </svg>
            </div>
        </div>

        <!-- Control de la plataforma -->
        <div class="sidebar-item" data-estado="Default" style="width: 344px; height: 56px; position: relative;">
            <div style="width: 344px; height: 50px; padding-top: 14px; padding-bottom: 14px; padding-left: 16px; padding-right: 22px; left: 0px; top: 3px; position: absolute; overflow: hidden; border-radius: 2px; justify-content: space-between; align-items: center; display: inline-flex; transition: background-color 0.2s ease;">
                <a href="/Admin/ControlPlataforma" style="text-decoration: none; color: white; display: flex; align-items: center; gap: 8px; width: 100%;">
                    <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                        <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
                            <path d="M9.02632 21.3158L8.5 19.6316C8.18421 19.5263 7.88421 19.3947 7.6 19.2368C7.31579 19.0789 7.04211 18.9 6.77895 18.7L5.21053 19.4211L3.23684 16.0526L4.57895 15C4.55789 14.8421 4.54737 14.6895 4.54737 14.5421V13.9737C4.54737 13.8263 4.55789 13.6737 4.57895 13.5158L3.23684 12.4632L5.21053 9.09474L6.77895 9.81579C7.04211 9.61579 7.32105 9.43684 7.61579 9.27895C7.91053 9.12105 8.20526 8.98947 8.5 8.88421L9.02632 7.2H12.9737L13.5 8.88421C13.8158 8.98947 14.1158 9.12105 14.4 9.27895C14.6842 9.43684 14.9579 9.61579 15.2211 9.81579L16.7895 9.09474L18.7632 12.4632L17.4211 13.5158C17.4421 13.6737 17.4526 13.8263 17.4526 13.9737V14.5421C17.4526 14.6895 17.4316 14.8421 17.3895 15L18.7316 16.0526L16.7579 19.4211L15.2211 18.7C14.9579 18.9 14.6789 19.0789 14.3842 19.2368C14.0895 19.3947 13.7947 19.5263 13.5 19.6316L12.9737 21.3158H9.02632ZM11 16.5789C11.9579 16.5789 12.7789 16.2421 13.4632 15.5684C14.1474 14.8947 14.4895 14.0842 14.4895 13.1368C14.4895 12.1895 14.1474 11.3789 13.4632 10.7053C12.7789 10.0316 11.9579 9.69474 11 9.69474C10.0316 9.69474 9.20526 10.0316 8.52632 10.7053C7.84737 11.3789 7.50789 12.1895 7.50789 13.1368C7.50789 14.0842 7.84737 14.8947 8.52632 15.5684C9.20526 16.2421 10.0316 16.5789 11 16.5789ZM11 14.9368C10.5053 14.9368 10.0895 14.7632 9.75263 14.4158C9.41579 14.0684 9.24737 13.6421 9.24737 13.1368C9.24737 12.6316 9.41579 12.2053 9.75263 11.8579C10.0895 11.5105 10.5053 11.3368 11 11.3368C11.4947 11.3368 11.9105 11.5105 12.2474 11.8579C12.5842 12.2053 12.7526 12.6316 12.7526 13.1368C12.7526 13.6421 12.5842 14.0684 12.2474 14.4158C11.9105 14.7632 11.4947 14.9368 11 14.9368ZM10.2316 19.6737H11.7684L12.2 17.6632C12.7789 17.5158 13.3211 17.2895 13.8263 16.9842C14.3316 16.6789 14.7789 16.3053 15.1684 15.8632L17.1053 16.6684L17.8737 15.3158L16.1474 14.0211C16.2316 13.7579 16.2947 13.4895 16.3368 13.2158C16.3789 12.9421 16.4 12.6684 16.4 12.3947C16.4 12.1211 16.3789 11.8474 16.3368 11.5737C16.2947 11.3 16.2316 11.0316 16.1474 10.7684L17.8737 9.47368L17.1053 8.12105L15.1684 8.92632C14.7789 8.48421 14.3316 8.11053 13.8263 7.80526C13.3211 7.5 12.7789 7.27368 12.2 7.12632L11.7684 5.11579H10.2316L9.8 7.12632C9.22105 7.27368 8.67895 7.5 8.17368 7.80526C7.66842 8.11053 7.22105 8.48421 6.83158 8.92632L4.89474 8.12105L4.12632 9.47368L5.85263 10.7684C5.76842 11.0316 5.70526 11.3 5.66316 11.5737C5.62105 11.8474 5.6 12.1211 5.6 12.3947C5.6 12.6684 5.62105 12.9421 5.66316 13.2158C5.70526 13.4895 5.76842 13.7579 5.85263 14.0211L4.12632 15.3158L4.89474 16.6684L6.83158 15.8632C7.22105 16.3053 7.66842 16.6789 8.17368 16.9842C8.67895 17.2895 9.22105 17.5158 9.8 17.6632L10.2316 19.6737ZM11 0L14.5579 3.57895H7.44211L11 0ZM0 11L3.57895 7.44211V14.5579L0 11ZM22 11L18.4211 14.5579V7.44211L22 11Z" fill="white"/>
                        </svg>
                        <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Control de la plataforma</div>
                    </div>
                </a>
                <svg width="12" height="6" viewBox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
                    <path d="M0 0L6 6L12 0H0Z" fill="white"/>
                </svg>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="admin-main-content">
        <!-- Page Title -->
        <h1 class="page-title">
            Pendientes de aprobación
        </h1>

        <!-- Table -->
        <div class="table-container">
            <table class="approval-table">
                <thead>
                    <tr>
                        <th>Código</th>
                        <th>Título</th>
                        <th>Fecha</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody id="pending-table-body">
                    @foreach(var item in Model.PendingApprovals)
                    {
                        <tr data-auto-id="@item.Id">
                            <td>@item.Code</td>
                            <td>@item.Title</td>
                            <td>@item.Date</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="btn-action btn-approve" title="Aprobar" onclick="approveItem(@item.Id, '@item.Title')">
                                        <svg width="18" height="14" viewBox="0 0 18 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M6 11.17L1.83 7L0.410004 8.41L6 14L18 2L16.59 0.589996L6 11.17Z" fill="white"/>
                                        </svg>
                                    </button>
                                    <button class="btn-action btn-reject" title="Rechazar" onclick="rejectItem(@item.Id, '@item.Title')">
                                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z" fill="white"/>
                                        </svg>
                                    </button>
                                    <button class="btn-review" onclick="reviewItem(@item.Id)">
                                        Revisar
                                        <svg width="9" height="5" viewBox="0 0 9 5" fill="none" xmlns="http://www.w3.org/2000/svg" style="transform: rotate(90deg);">
                                            <path d="M0 0L4.5 4.5L9 0H0Z" fill="white"/>
                                        </svg>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Modal de confirmación -->
<div id="confirmationModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); z-index: 9999; justify-content: center; align-items: center;">
    <div style="background: #030D2B; border-radius: 8px; padding: 32px; max-width: 500px; width: 90%; border: 1px solid rgba(255, 255, 255, 0.25);">
        <h2 id="modalTitle" style="color: white; font-size: 20px; font-family: 'Montserrat', sans-serif; font-weight: 700; margin-bottom: 16px; text-align: center;">¡Anuncio Aprobado!</h2>
        <p id="modalMessage" style="color: #F7F7F7; font-size: 16px; font-family: 'Montserrat', sans-serif; font-weight: 500; margin-bottom: 24px; text-align: center;"></p>
        <div style="display: flex; justify-content: center;">
            <button onclick="closeModal()" style="background: #00CC00; color: white; border: none; border-radius: 4px; padding: 12px 32px; font-size: 14px; font-family: 'Montserrat', sans-serif; font-weight: 600; cursor: pointer;">Cerrar</button>
        </div>
    </div>
</div>

<script>
function toggleDropdown(dropdownId) {
    const dropdown = document.getElementById(dropdownId + '-dropdown');
    const arrow = document.getElementById(dropdownId + '-arrow');

    if (dropdown.style.display === 'none' || dropdown.style.display === '') {
        dropdown.style.display = 'flex';
        arrow.style.transform = 'rotate(180deg)';
    } else {
        dropdown.style.display = 'none';
        arrow.style.transform = 'rotate(0deg)';
    }
}

function showModal(title, message) {
    document.getElementById('modalTitle').textContent = title;
    document.getElementById('modalMessage').textContent = message;
    document.getElementById('confirmationModal').style.display = 'flex';
}

function closeModal() {
    document.getElementById('confirmationModal').style.display = 'none';
}

async function approveItem(id, title) {
    try {
        const response = await fetch(`/api/admin/AdminApproval/approve/${id}`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            }
        });

        const data = await response.json();

        if (data.success) {
            // Remover la fila de la tabla
            const row = document.querySelector(`tr[data-auto-id="${id}"]`);
            if (row) {
                row.style.opacity = '0';
                setTimeout(() => row.remove(), 300);
            }

            // Mostrar modal de confirmación
            showModal('¡Anuncio Aprobado!', `El anuncio "${data.title}" fue aprobado exitosamente.`);
        } else {
            alert(data.message || 'Error al aprobar el anuncio');
        }
    } catch (error) {
        console.error('Error:', error);
        alert('Error al aprobar el anuncio. Por favor, intente nuevamente.');
    }
}

async function rejectItem(id, title) {
    if (!confirm(`¿Está seguro que desea rechazar el anuncio "${title}"?`)) {
        return;
    }

    try {
        const response = await fetch(`/api/admin/AdminApproval/reject/${id}`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            }
        });

        const data = await response.json();

        if (data.success) {
            // Remover la fila de la tabla
            const row = document.querySelector(`tr[data-auto-id="${id}"]`);
            if (row) {
                row.style.opacity = '0';
                setTimeout(() => row.remove(), 300);
            }

            showModal('Anuncio Rechazado', `El anuncio "${data.title}" fue rechazado.`);
        } else {
            alert(data.message || 'Error al rechazar el anuncio');
        }
    } catch (error) {
        console.error('Error:', error);
        alert('Error al rechazar el anuncio. Por favor, intente nuevamente.');
    }
}

function reviewItem(id) {
    window.location.href = `/producto/${id}`;
}

// Agregar efectos hover
document.addEventListener('DOMContentLoaded', function() {
    // Hover effects para los dropdown items
    const dropdownItems = document.querySelectorAll('.dropdown-item');
    dropdownItems.forEach(item => {
        item.addEventListener('mouseenter', function() {
            // No aplicar hover si ya está activo (tiene fondo 0.25)
            if (!this.style.background.includes('0.25')) {
                this.style.background = 'rgba(255, 255, 255, 0.15)';
            }
        });
        item.addEventListener('mouseleave', function() {
            // Mantener el fondo activo si corresponde
            if (!this.querySelector('a').href.includes('PendientesAprobacion')) {
                this.style.background = 'transparent';
            }
        });
    });

    // Hover effects para los menu items principales
    const sidebarItems = document.querySelectorAll('.sidebar-item[data-estado="Default"]');
    sidebarItems.forEach(item => {
        const menuDiv = item.querySelector('div[style*="position: absolute"]');
        if (menuDiv) {
            menuDiv.addEventListener('mouseenter', function() {
                this.style.background = 'rgba(255, 255, 255, 0.1)';
            });
            menuDiv.addEventListener('mouseleave', function() {
                this.style.background = 'transparent';
            });
        }
    });

    // Hover effect para Estadísticas dropdown
    const estadisticasDiv = document.querySelector('[onclick="toggleDropdown(\'estadisticas\')"]');
    if (estadisticasDiv) {
        estadisticasDiv.addEventListener('mouseenter', function() {
            this.style.background = 'rgba(255, 255, 255, 0.15)';
        });
        estadisticasDiv.addEventListener('mouseleave', function() {
            this.style.background = 'transparent';
        });
    }

    // Hover effect para Gestión de anuncios dropdown (mantener activo)
    const gestionAnunciosDiv = document.querySelector('[onclick="toggleDropdown(\'gestion-anuncios\')"]');
    if (gestionAnunciosDiv) {
        gestionAnunciosDiv.addEventListener('mouseenter', function() {
            this.style.background = 'rgba(255, 255, 255, 0.2)';
        });
        gestionAnunciosDiv.addEventListener('mouseleave', function() {
            this.style.background = 'rgba(255, 255, 255, 0.15)';
        });
    }

    // Agregar transición de opacidad a las filas
    const rows = document.querySelectorAll('tbody tr');
    rows.forEach(row => {
        row.style.transition = 'opacity 0.3s ease';
    });
});
</script>
