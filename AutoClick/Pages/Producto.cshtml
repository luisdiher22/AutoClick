@page "/producto/{id:int}"
@model ProductoModel
@{
    ViewData["Title"] = $"{Model.Vehicle?.NombreCompleto} - AutoClick.cr";
}

<!-- Dark Theme Product Page -->
<div class="producto-page">
    <div class="producto-container">
        <!-- Breadcrumb Navigation -->
        <nav class="producto-breadcrumb">
            <a asp-page="/Index" class="breadcrumb-link">Inicio</a>
            <span class="breadcrumb-separator">/</span>
            <a asp-page="/Explorar" class="breadcrumb-link">Explorar todos los autos</a>
            <span class="breadcrumb-separator">/</span>
            <span class="breadcrumb-current">@Model.Vehicle?.NombreCompleto</span>
        </nav>

        <div class="producto-content">
            <!-- Main Image Gallery -->
            @if (Model.Vehicle != null)
            {
                <div class="producto-gallery">
                    <div class="producto-main-image">
                        @if (!string.IsNullOrEmpty(Model.Vehicle.ImagenPrincipal))
                        {
                            <img src="@Model.Vehicle.ImagenPrincipal" alt="@Model.Vehicle.NombreCompleto" class="main-car-image" style="object-fit: contain;" />
                        }

                        <!-- Navigation Arrows -->
                        <button class="gallery-nav-btn prev-btn">
                            <div class="nav-arrow left"></div>
                        </button>
                        <button class="gallery-nav-btn next-btn">
                            <div class="nav-arrow right"></div>
                        </button>
                    </div>

                    <!-- Thumbnail Gallery -->
                    @{
                        var imageUrls = Model.Vehicle.ImagenesUrlsList ?? new List<string>();
                        if (imageUrls.Count == 0 && !string.IsNullOrEmpty(Model.Vehicle.ImagenPrincipal))
                        {
                            imageUrls = new List<string> { Model.Vehicle.ImagenPrincipal };
                        }
                    }

                    @if (imageUrls.Count > 0)
                    {
                        <div class="producto-thumbnails">
                            @{
                                var maxThumbnails = Math.Min(8, imageUrls.Count);
                            }
                            @for (int i = 0; i < maxThumbnails; i++)
                            {
                                <div class="thumbnail-item @(i == 0 ? "active" : "")">
                                    @if (i == 7 && imageUrls.Count > 8)
                                    {
                                        <img src="@imageUrls[i]" alt="Más imágenes" style="object-fit: contain;" />
                                        <div class="thumbnail-overlay">
                                            <div class="plus-icon">+</div>
                                        </div>
                                    }
                                    else
                                    {
                                        <img src="@imageUrls[i]" alt="@Model.Vehicle.NombreCompleto vista @(i + 1)" style="object-fit: contain;" />
                                    }
                                </div>
                            }
                        </div>
                    }
                </div>
            }

            <!-- Right Sidebar -->
            <div class="producto-sidebar">
                <!-- Car Information Card -->
                <div class="producto-info-card">
                    <h1 class="producto-car-title">@Model.Vehicle?.NombreCompleto</h1>
                    <p class="producto-car-mileage">@Model.FormatKilometrage(Model.Vehicle?.Kilometraje ?? 0)</p>
                    <p class="producto-car-price">@Model.Vehicle?.PrecioEnCRC</p>

                    <div class="producto-payment-estimate">
                        <h3>Cuota estimada</h3>
                        <p>@Model.FormatPrice(Model.MonthlyPayment)/mes</p>
                    </div>

                    <div class="producto-actions">
                        <div class="producto-icons">
                            <button class="favorite-btn">
                                <div class="heart-icon"></div>
                            </button>
                            <button class="share-btn">
                                <div class="share-icon"></div>
                            </button>
                        </div>

                        <button class="producto-preapproval-btn">
                            Solicitar pre-aprobación
                        </button>
                    </div>
                </div>

                <!-- Contact Seller Card -->
                <div class="producto-contact-card">
                    <h3>Contactar al vendedor</h3>
                    @if (Model.Vehicle?.Propietario != null)
                    {
                        <p class="seller-name">@Model.Vehicle.Propietario.NombreCompleto</p>

                        <button class="contact-phone-btn">
                            Llamar @Model.Vehicle.Propietario.NumeroTelefono
                        </button>

                        <button class="contact-whatsapp-btn">
                            <div class="whatsapp-icon"></div>
                            @Model.Vehicle.Propietario.NumeroTelefono
                        </button>
                    }
                </div>

                <!-- Seller Information Card -->
                @if (Model.Vehicle?.Propietario != null)
                {
                    <div class="producto-seller-card">
                        <h3>Información del vendedor</h3>
                        <p class="seller-business-name">@Model.Vehicle.Propietario.NombreAMostrar</p>

                        <div class="seller-contact-info">
                            @if (!string.IsNullOrEmpty(Model.Vehicle.Propietario.NumeroTelefono))
                            {
                                <div class="seller-phones">
                                    <div class="phone-icon"></div>
                                    <span>@Model.Vehicle.Propietario.NumeroTelefono</span>
                                </div>
                            }

                            @if (!string.IsNullOrEmpty(Model.Vehicle.UbicacionCompleta))
                            {
                                <div class="seller-location">
                                    <div class="location-icon"></div>
                                    <span>@Model.Vehicle.UbicacionCompleta</span>
                                </div>
                            }

                            <div class="seller-car-count">
                                <div class="car-icon"></div>
                                <span>(@Model.SellerCarCount de autos publicados)</span>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>

        <!-- Description Section -->
        @if (Model.Vehicle != null)
        {
            <section class="producto-description">
                <h2>Descripción</h2>
                <p>
                    @{
                        var descripcion = $"Potencia, elegancia y tecnología se fusionan en este impresionante {Model.Vehicle.NombreCompleto}, diseñado para quienes exigen rendimiento sin renunciar al confort. ";

                        if (Model.Vehicle.Kilometraje > 0)
                        {
                            descripcion += $"Con {Model.FormatKilometrage(Model.Vehicle.Kilometraje)}. ";
                        }

                        if (!string.IsNullOrEmpty(Model.Vehicle.Combustible))
                        {
                            descripcion += $"Propulsión: {Model.Vehicle.Combustible}. ";
                        }

                        if (!string.IsNullOrEmpty(Model.Vehicle.Transmision))
                        {
                            descripcion += $"Transmisión {Model.Vehicle.Transmision}. ";
                        }

                        if (!string.IsNullOrEmpty(Model.Vehicle.UbicacionCompleta))
                        {
                            descripcion += $"Ubicado en {Model.Vehicle.UbicacionCompleta}.";
                        }
                    }
                    @descripcion
                </p>
            </section>
        }

        <!-- Specifications Section -->
        @if (Model.Vehicle != null)
        {
        <section class="producto-specifications">
            <h2>Especificaciones</h2>
            <div class="specs-grid">
                <div class="spec-column">
                    <div class="spec-item">
                        <h3>Marca</h3>
                        <p>@Model.ToTitleCase(Model.Vehicle?.Marca)</p>
                    </div>
                    <div class="spec-item">
                        <h3>Modelo</h3>
                        <p>@Model.ToTitleCase(Model.Vehicle?.Modelo)</p>
                    </div>
                    <div class="spec-item">
                        <h3>Año</h3>
                        <p>@Model.Vehicle?.Ano</p>
                    </div>
                </div>
                
                <div class="spec-column">
                    <div class="spec-item">
                        <h3>Kilometraje</h3>
                        <p>@Model.FormatKilometrage(Model.Vehicle?.Kilometraje ?? 0)</p>
                    </div>
                    <div class="spec-item">
                        <h3>Carrocería</h3>
                        <p>@Model.Vehicle?.Carroceria</p>
                    </div>
                    <div class="spec-item">
                        <h3>Número de puertas</h3>
                        <p>@Model.Vehicle?.NumeroPuertas</p>
                    </div>
                </div>
                
                <div class="spec-column">
                    <div class="spec-item">
                        <h3>Motor</h3>
                        <p>@Model.Vehicle?.Cilindrada</p>
                    </div>
                    <div class="spec-item">
                        <h3>Propulsión</h3>
                        <p>@Model.Vehicle?.Combustible</p>
                    </div>
                    <div class="spec-item">
                        <h3>Transmisión</h3>
                        <p>@Model.Vehicle?.Transmision</p>
                    </div>
                </div>
            </div>
        </section>
        }

        <!-- Equipment Section -->
        @{
            var allExtras = new List<string>();
            if (Model.Vehicle != null)
            {
                allExtras.AddRange(Model.Vehicle.ExtrasInteriorList ?? new List<string>());
                allExtras.AddRange(Model.Vehicle.ExtrasExteriorList ?? new List<string>());
                allExtras.AddRange(Model.Vehicle.ExtrasMultimediaList ?? new List<string>());
                allExtras.AddRange(Model.Vehicle.ExtrasSeguridadList ?? new List<string>());
                allExtras.AddRange(Model.Vehicle.ExtrasRendimientoList ?? new List<string>());
                allExtras.AddRange(Model.Vehicle.ExtrasAntiRoboList ?? new List<string>());

                // Capitalizar primera letra de cada item
                allExtras = allExtras.Where(e => !string.IsNullOrEmpty(e))
                    .Select(e => char.ToUpper(e[0]) + e.Substring(1).ToLower())
                    .ToList();
            }

            var halfCount = (int)Math.Ceiling(allExtras.Count / 2.0);
        }

        @if (allExtras.Count > 0)
        {
            <section class="producto-equipment">
                <h2>Equipamiento</h2>
                <div class="equipment-grid">
                    <div class="equipment-column">
                        @for (int i = 0; i < halfCount && i < allExtras.Count; i++)
                        {
                            <div class="equipment-item">• @allExtras[i]</div>
                        }
                    </div>
                    <div class="equipment-column">
                        @for (int i = halfCount; i < allExtras.Count; i++)
                        {
                            <div class="equipment-item">• @allExtras[i]</div>
                        }
                    </div>
                </div>
            </section>
        }

        <!-- Marchamo Calculator Section -->
        @if (Model.Vehicle != null)
        {
            <section class="producto-marchamo">
                <div class="marchamo-content">
                    <div class="marchamo-header">
                        <p class="marchamo-subtitle">Calculadora de marchamo y traspaso</p>
                    </div>

                    <h2 class="marchamo-car-title">@Model.Vehicle.NombreCompleto</h2>

                    <div class="marchamo-sections">
                        <div class="marchamo-section">
                            <h3>Marchamo 2025</h3>
                            <p class="coming-soon">DISPONIBLE PRÓXIMAMENTE</p>
                        </div>

                        <div class="marchamo-section">
                            <h3>Costos de traspaso</h3>
                            <p class="coming-soon">DISPONIBLE PRÓXIMAMENTE</p>
                        </div>
                    </div>

                    <p class="marchamo-powered">Impulsado por AutoClick.cr</p>
                </div>

                <div class="marchamo-disclaimer">
                    Autoclick.cr informa que los valores presentados en esta plataforma son únicamente estimaciones de referencia. El cálculo oficial del marchamo corresponde al Instituto Nacional de Seguros (INS) y el monto exacto de los gastos de traspaso debe ser determinado por un abogado autorizado. Autoclick.cr no se hace responsable por diferencias entre los valores estimados y los montos oficiales.
                </div>
            </section>
        }

        <!-- Market Value Analysis Section -->
        @if (Model.ValorMercado != null)
        {
            <section class="producto-market-analysis">
                <h2>Valor de mercado</h2>
                
                @if (!Model.ValorMercado.TieneDatos)
                {
                    <!-- Sin datos disponibles -->
                    <div class="market-no-data">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="rgba(255, 255, 255, 0.3)" stroke-width="2"/>
                            <path d="M12 8V12" stroke="rgba(255, 255, 255, 0.3)" stroke-width="2" stroke-linecap="round"/>
                            <circle cx="12" cy="16" r="1" fill="rgba(255, 255, 255, 0.3)"/>
                        </svg>
                        <p>@Model.ValorMercado.MensajeSinDatos</p>
                    </div>
                }
                else
                {
                    <!-- Badge de clasificación -->
                    <div class="market-badge-container">
                        <div class="market-badge" style="background-color: @Model.ValorMercado.ColorOferta;">
                            @Model.ValorMercado.DescripcionOferta
                        </div>
                        <p class="market-comparison">
                            @if (Model.ValorMercado.PorcentajeDiferencia < 0)
                            {
                                <span>@Math.Abs(Model.ValorMercado.PorcentajeDiferencia)% por debajo del promedio</span>
                            }
                            else if (Model.ValorMercado.PorcentajeDiferencia > 0)
                            {
                                <span>@Model.ValorMercado.PorcentajeDiferencia% por arriba del promedio</span>
                            }
                            else
                            {
                                <span>Al precio promedio del mercado</span>
                            }
                        </p>
                    </div>

                    <!-- Gráfico de rango de precios -->
                    <div class="market-chart">
                        <div class="market-chart-header">
                            <div class="chart-label">
                                <span class="label-title">Mínimo</span>
                                <span class="label-value">₡@Model.FormatNumber(Model.ValorMercado.PrecioMinimo)</span>
                            </div>
                            <div class="chart-label">
                                <span class="label-title">Promedio</span>
                                <span class="label-value">₡@Model.FormatNumber(Model.ValorMercado.PromedioPrecio)</span>
                            </div>
                            <div class="chart-label">
                                <span class="label-title">Máximo</span>
                                <span class="label-value">₡@Model.FormatNumber(Model.ValorMercado.PrecioMaximo)</span>
                            </div>
                        </div>

                        <div class="market-range-bar">
                            <!-- Barra de rango completo -->
                            <div class="range-bar-background"></div>
                            
                            <!-- Marcador del promedio -->
                            <div class="range-marker average-marker" style="left: 50%;">
                                <div class="marker-line"></div>
                            </div>
                            
                            <!-- Marcador del precio actual -->
                            <div class="range-marker current-marker" style="left: @(Model.ValorMercado.PosicionEnRango)%; background-color: @Model.ValorMercado.ColorOferta;">
                                <div class="marker-dot"></div>
                                <div class="marker-label">
                                    <span>Este auto</span>
                                    <span class="marker-price">₡@Model.FormatNumber(Model.ValorMercado.PrecioActual)</span>
                                </div>
                            </div>
                        </div>

                        <div class="market-chart-footer">
                            <p>Basado en @Model.ValorMercado.CantidadRegistros @(Model.ValorMercado.CantidadRegistros == 1 ? "venta similar" : "ventas similares")</p>
                        </div>
                    </div>

                    <!-- Información adicional -->
                    <div class="market-info-grid">
                        <div class="market-info-item">
                            <h4>Diferencia con el promedio</h4>
                            <p class="@(Model.ValorMercado.DiferenciaConPromedio < 0 ? "positive" : "negative")">
                                @(Model.ValorMercado.DiferenciaConPromedio < 0 ? "-" : "+")₡@Model.FormatNumber(Math.Abs(Model.ValorMercado.DiferenciaConPromedio))
                            </p>
                        </div>
                        <div class="market-info-item">
                            <h4>Precio actual</h4>
                            <p>₡@Model.FormatNumber(Model.ValorMercado.PrecioActual)</p>
                        </div>
                    </div>
                }
            </section>
        }

        <!-- Financing Calculator Section -->
        <section class="producto-financing">
            <h2>CALCULAR FINANCIAMIENTO</h2>
            
            <form method="get" class="financing-form">
                <input type="hidden" name="id" value="@Model.Id" />
                
                <div class="financing-row">
                    <div class="financing-field">
                        <label for="currency">Moneda *</label>
                        <select name="currency" id="currency" class="financing-select">
                            <option value="USD" selected="@(Model.Currency == "USD")">Dólar (USD)</option>
                            <option value="CRC" selected="@(Model.Currency == "CRC")">Colones (CRC)</option>
                        </select>
                    </div>
                    
                    <div class="financing-field">
                        <label for="vehiclePrice">Precio total del vehículo *</label>
                        <input type="text" name="vehiclePrice" id="vehiclePrice" value="@Model.FormatPrice(Model.VehiclePrice)" class="financing-input" readonly />
                    </div>
                </div>
                
                <div class="financing-row">
                    <div class="financing-field">
                        <label for="loanTerm">Plazo del préstamo *</label>
                        <select name="loanTerm" id="loanTerm" class="financing-select">
                            <option value="84" selected="@(Model.LoanTerm == 84)">84 meses</option>
                            <option value="72" selected="@(Model.LoanTerm == 72)">72 meses</option>
                            <option value="60" selected="@(Model.LoanTerm == 60)">60 meses</option>
                            <option value="48" selected="@(Model.LoanTerm == 48)">48 meses</option>
                        </select>
                    </div>
                    
                    <div class="financing-field">
                        <label for="downPayment">Prima deseada</label>
                        <input type="number" name="downPayment" id="downPayment" value="@Model.DownPayment" placeholder="Mínimo $10,000" class="financing-input" />
                    </div>
                </div>
                
                <div class="financing-row">
                    <div class="financing-field">
                        <label for="annualRate">Tasa anual</label>
                        <input type="text" name="annualRate" id="annualRate" value="8.5%" class="financing-input" readonly />
                    </div>
                    
                    <div class="financing-field">
                        <label for="monthlyPayment"><strong>Cuota mensual estimada</strong></label>
                        <input type="text" id="monthlyPayment" value="@Model.FormatPrice(Model.MonthlyPayment)" readonly class="financing-result" />
                    </div>
                </div>
                
                <button type="button" class="financing-submit-btn" onclick="solicitarPreAprobacion()">Solicitar pre-aprobación</button>
            </form>
        </section>


        <!-- Similar Cars Section -->
        <section class="producto-similar-cars">
            <div class="similar-cars-header">
                <h2>Vehículos similares</h2>
                <a href="#" class="see-all-link">Ver todo</a>
            </div>
            
            <div class="similar-cars-grid">
                @foreach (var auto in Model.SimilarAutos)
                {
                    <div class="similar-car-card" onclick="window.location.href='@Url.Page("/Producto", new { id = auto.Id })'" style="cursor: pointer;">
                        @if (!string.IsNullOrEmpty(auto.ImagenPrincipal))
                        {
                            <img src="@auto.ImagenPrincipal" alt="@auto.NombreCompleto" class="similar-car-image" style="object-fit: contain;" />
                        }
                        <div class="similar-car-info">
                            <h3 class="similar-car-title">@auto.NombreCompleto</h3>
                            <p class="similar-car-price">@auto.PrecioEnCRC</p>
                        </div>
                        <div class="similar-car-actions">
                            <button class="similar-favorite-btn" onclick="event.stopPropagation();">
                                <div class="heart-outline"></div>
                            </button>
                            <button class="similar-share-btn" onclick="event.stopPropagation();">
                                <div class="share-outline"></div>
                            </button>
                        </div>
                    </div>
                }
            </div>
        </section>

    </div>

    <!-- Footer -->
    <partial name="_Footer" />
</div>

<script>
// Gallery navigation
document.addEventListener('DOMContentLoaded', function() {
    // Thumbnail click functionality
    const thumbnails = document.querySelectorAll('.thumbnail-item');
    const mainImage = document.querySelector('.main-car-image');
    
    thumbnails.forEach((thumb, index) => {
        thumb.addEventListener('click', function() {
            // Remove active class from all thumbnails
            thumbnails.forEach(t => t.classList.remove('active'));
            // Add active class to clicked thumbnail
            this.classList.add('active');
            
            // Update main image (in a real app, you'd have different images)
            if (index < 7) { // Not the "more images" thumbnail
                // Update main image src here
            }
        });
    });
    
    // Financing calculator auto-update (excluding readonly fields)
    const financingInputs = document.querySelectorAll('.financing-input:not([readonly]), .financing-select');
    financingInputs.forEach(input => {
        input.addEventListener('change', function() {
            // Auto-submit form to recalculate
            this.closest('form').submit();
        });
    });
});

// Function for pre-approval button
function solicitarPreAprobacion() {
    // Get form data
    const vehiculo = '@Html.Raw((Model.Vehicle?.NombreCompleto ?? "Vehículo").Replace("'", "\\'"))';
    const precio = document.getElementById('vehiclePrice').value;
    const plazo = document.getElementById('loanTerm').value;
    const prima = document.getElementById('downPayment').value || '0';
    
    // Build URL with parameters
    const params = new URLSearchParams({
        vehiculo: vehiculo,
        precio: precio,
        plazo: plazo,
        prima: prima
    });
    
    // Redirect to bank landing page
    window.location.href = '/LandingBanco?' + params.toString();
}
</script>

<style>
/* Market Value Analysis Styles */
.producto-market-analysis {
    background: rgba(3, 13, 43, 0.6);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    padding: 32px;
    margin-top: 32px;
    margin-bottom: 32px;
}

.producto-market-analysis h2 {
    color: white;
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 24px;
    font-family: 'Montserrat', sans-serif;
}

/* Sin datos */
.market-no-data {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 48px 24px;
    text-align: center;
}

.market-no-data svg {
    margin-bottom: 16px;
    opacity: 0.5;
}

.market-no-data p {
    color: rgba(255, 255, 255, 0.6);
    font-size: 16px;
    line-height: 1.6;
    max-width: 600px;
}

/* Badge de clasificación */
.market-badge-container {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 32px;
    flex-wrap: wrap;
}

.market-badge {
    padding: 8px 20px;
    border-radius: 24px;
    color: white;
    font-weight: 700;
    font-size: 16px;
    font-family: 'Montserrat', sans-serif;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.market-comparison {
    color: rgba(255, 255, 255, 0.8);
    font-size: 14px;
    margin: 0;
}

/* Gráfico de rango */
.market-chart {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    padding: 24px;
    margin-bottom: 24px;
}

.market-chart-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 24px;
    gap: 16px;
    flex-wrap: wrap;
}

.chart-label {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.label-title {
    color: rgba(255, 255, 255, 0.5);
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.label-value {
    color: white;
    font-size: 18px;
    font-weight: 600;
}

/* Barra de rango */
.market-range-bar {
    position: relative;
    height: 60px;
    margin: 32px 0;
}

.range-bar-background {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 100%;
    height: 8px;
    background: linear-gradient(90deg, 
        rgba(147, 51, 234, 0.3) 0%,
        rgba(34, 197, 94, 0.3) 50%,
        rgba(239, 68, 68, 0.3) 100%
    );
    border-radius: 4px;
}

.range-marker {
    position: absolute;
    top: 50%;
    transform: translate(-50%, -50%);
}

.average-marker .marker-line {
    width: 2px;
    height: 40px;
    background: rgba(255, 255, 255, 0.5);
    border-radius: 1px;
}

.current-marker {
    display: flex;
    flex-direction: column;
    align-items: center;
    z-index: 2;
}

.marker-dot {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: inherit;
    border: 3px solid white;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
}

.marker-label {
    position: absolute;
    top: -60px;
    display: flex;
    flex-direction: column;
    align-items: center;
    white-space: nowrap;
    background: rgba(0, 0, 0, 0.8);
    padding: 8px 12px;
    border-radius: 6px;
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.marker-label span:first-child {
    color: rgba(255, 255, 255, 0.7);
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.marker-price {
    color: white;
    font-weight: 700;
    font-size: 14px;
}

.market-chart-footer {
    text-align: center;
    margin-top: 16px;
}

.market-chart-footer p {
    color: rgba(255, 255, 255, 0.5);
    font-size: 13px;
    margin: 0;
}

/* Grid de información */
.market-info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
}

.market-info-item {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    padding: 16px;
}

.market-info-item h4 {
    color: rgba(255, 255, 255, 0.6);
    font-size: 13px;
    font-weight: 500;
    margin: 0 0 8px 0;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.market-info-item p {
    color: white;
    font-size: 20px;
    font-weight: 700;
    margin: 0;
}

.market-info-item p.positive {
    color: #22C55E;
}

.market-info-item p.negative {
    color: #EF4444;
}

/* Responsive */
@@media (max-width: 768px) {
    .producto-market-analysis {
        padding: 20px;
    }

    .market-badge-container {
        flex-direction: column;
        align-items: flex-start;
    }

    .market-chart-header {
        flex-direction: column;
        gap: 12px;
    }

    .marker-label {
        font-size: 11px;
        padding: 6px 10px;
    }

    .marker-price {
        font-size: 12px;
    }
}
</style>

