@page "/recien-vistos"
@model RecienVistosModel
@{
    ViewData["Title"] = "Recién Vistos - AutoClick.cr";
}

<!-- Header -->
<!-- Header removed - Using universal header -->
    <div class="logo-container">
        <a asp-page="/Index">
            <img src="~/images/logo.png" alt="AutoClick.cr" style="height: 23px;" />
        </a>
    </div>
    
    <nav class="nav-menu">
        <div>
            <img src="~/images/costa-rica-flag.png" alt="Costa Rica" style="width: 67px; height: 31px;" />
        </div>
        <div class="nav-dropdown-container">
            <a href="#" class="nav-item nav-dropdown">Anúnciese</a>
            <div class="dropdown-menu">
                <a asp-page="/RegistroAgencia" class="dropdown-item">Registrarse como agencia</a>
                <a asp-page="/AnunciarEmpresa" class="dropdown-item">Anuncie su empresa</a>
            </div>
        </div>
        <div class="nav-dropdown-container">
            <a href="#" class="nav-item nav-dropdown">Productos & Servicios</a>
            <div class="dropdown-menu">
                <a asp-page="/PpfCeramico" class="dropdown-item">PPF y Cerámico</a>
                <a asp-page="/RaloyDetailing" class="dropdown-item">Raloy - Detailing</a>
            </div>
        </div>
        <div class="nav-dropdown-container">
            <a href="#" class="nav-item nav-dropdown">Financiamiento</a>
            <div class="dropdown-menu">
                <a asp-page="/Gumout" class="dropdown-item">Gumout</a>
            </div>
        </div>
    </nav>
    
    <div class="header-actions">
        <div style="border-radius: 4px; padding: 12px; border: 2px solid white;">
            <div style="width: 20px; height: 17px; border: 2px solid white;"></div>
        </div>
        <a href="#" class="login-btn">
            <div style="width: 5px; height: 5px; background: white; margin-right: 5px;"></div>
            <div style="width: 10px; height: 6px; background: white; margin-right: 8px;"></div>
            Inicie sesión/Registro
        </a>
    </div>
</header>

<!-- Page Content -->
<div class="content-width">
    <!-- Breadcrumb Navigation -->
    <nav class="breadcrumb-nav">
        <a asp-page="/Index" class="breadcrumb-link">Inicio</a>
        <span class="breadcrumb-separator">/</span>
        <span class="breadcrumb-current">Recién Vistos</span>
    </nav>

    <!-- Page Header -->
    <div class="page-header">
        <div class="page-header-content">
            <h1 class="page-title">Recién Vistos</h1>
            <p class="page-subtitle">Autos que has visto recientemente</p>
        </div>
        <div class="page-actions">
            <div class="view-controls">
                <button class="view-btn active" data-view="grid">
                    <span class="grid-icon"></span>
                </button>
                <button class="view-btn" data-view="list">
                    <span class="list-icon"></span>
                </button>
            </div>
            <div class="sort-controls">
                <select class="sort-select">
                    <option value="recent">Más recientes</option>
                    <option value="price-asc">Precio: menor a mayor</option>
                    <option value="price-desc">Precio: mayor a menor</option>
                    <option value="year">Año más nuevo</option>
                </select>
            </div>
        </div>
    </div>

    <!-- Results Info -->
    <div class="results-info">
        <span class="results-count">@Model.RecentlyViewedAutos.Count autos encontrados</span>
        <a href="#" class="clear-history-btn">Limpiar historial</a>
    </div>

    <!-- Cars Grid -->
    <div class="cars-grid-page">
        @foreach (var auto in Model.RecentlyViewedAutos)
        {
            <a asp-page="/Producto" asp-route-id="@auto.Id" style="text-decoration: none; color: inherit;">
                <div class="car-card-page">
                    <div class="car-image-container">
                        <img src="@auto.ImagenPrincipal" alt="@auto.NombreCompleto" class="car-image" />
                        <div class="car-actions">
                            <button class="favorite-btn" title="Agregar a favoritos" onclick="event.stopPropagation(); event.preventDefault();">
                                <svg width="20" height="17" viewBox="0 0 24 24" fill="none">
                                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" fill="currentColor"/>
                                </svg>
                            </button>
                            <button class="share-btn" title="Compartir" onclick="event.stopPropagation(); event.preventDefault();">
                                <svg width="16" height="20" viewBox="0 0 24 24" fill="none">
                                    <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z" fill="currentColor"/>
                                </svg>
                            </button>
                        </div>
                        <div class="view-timestamp">
                            <span>Visto hace 2 horas</span>
                        </div>
                    </div>
                    
                    <div class="car-info">
                        <h3 class="car-title">@auto.NombreCompleto</h3>
                        <p class="car-price">@auto.ValorFiscalFormateado</p>
                        <div class="car-details">
                            <span class="car-year">@auto.Ano</span>
                            <span class="car-separator">•</span>
                            <span class="car-location">San José</span>
                        </div>
                    </div>
                </div>
            </a>
        }
    </div>

    <!-- Load More Button -->
    <div class="load-more-container">
        <button class="load-more-btn">
            Cargar más autos
        </button>
    </div>

    <!-- Empty State (if no cars) -->
    @if (!Model.RecentlyViewedAutos.Any())
    {
        <div class="empty-state">
            <div class="empty-state-icon">
                <svg width="80" height="80" viewBox="0 0 24 24" fill="none">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM13 17h-2v-6h2v6zm0-8h-2V7h2v2z" fill="rgba(255,255,255,0.3)"/>
                </svg>
            </div>
            <h2 class="empty-state-title">No has visto ningún auto recientemente</h2>
            <p class="empty-state-subtitle">Explora nuestro catálogo de autos y los verás aparecer aquí</p>
            <a asp-page="/Index" class="empty-state-btn">Explorar autos</a>
        </div>
    }

    <!-- Related Suggestions -->
    <div class="related-section">
        <div class="section-header">
            <div class="section-indicator"></div>
            <h2 class="section-title">Autos similares que podrían interesarte</h2>
        </div>
        
        <div class="cars-grid">
            @for (int i = 0; i < 3; i++)
            {
                <a asp-page="/Producto" asp-route-id="@(i + 20)" style="text-decoration: none; color: inherit;">
                    <div class="car-card">
                        <img src="https://placehold.co/392x209" alt="Auto" class="car-image" />
                        <div class="car-info">
                            <h3 class="car-title">@(i == 0 ? "2023 BMW X3 M40i" : i == 1 ? "2022 Volvo XC60 T8" : "2021 Genesis GV70")</h3>
                            <p class="car-price">@(i == 0 ? "$82,000" : i == 1 ? "$77,000" : "$71,000")</p>
                        </div>
                        <div class="car-actions">
                            <button class="favorite-btn" onclick="event.stopPropagation(); event.preventDefault();"></button>
                            <button class="share-btn" onclick="event.stopPropagation(); event.preventDefault();"></button>
                        </div>
                    </div>
                </a>
            }
        </div>
    </div>
</div>

<!-- Footer -->
<footer class="main-footer">
    <div class="footer-content">
        <div class="footer-brand">
            <img src="https://placehold.co/289x46" alt="AutoClick.cr Logo" class="footer-logo" />
            <div class="social-links">
                <div class="social-icon"></div>
                <div class="social-icon"></div>
                <div class="social-icon"></div>
            </div>
        </div>
        
        <div class="footer-links">
            <h3 class="footer-section-title font-jakarta">AutoClick.cr</h3>
            <nav class="footer-nav">
                <a href="/contactanos">Contáctenos</a>
                <a asp-page="/SobreNosotros">Sobre Nosotros</a>
                <a href="/reportar-problema">Reportar un problema</a>
            </nav>
        </div>
        
        <div class="footer-links" style="padding-top: 56px;">
            <nav class="footer-nav">
                <a href="/TerminosCondiciones">Términos y condiciones</a>
                <a href="/PoliticaPrivacidad">Política de privacidad</a>
            </nav>
        </div>
        
        <div class="newsletter">
            <h3 class="footer-section-title font-jakarta">Suscribete</h3>
            <form>
                <input type="email" class="newsletter-input" placeholder="Introducir correo" />
                <p style="color: white; font-size: 14px; font-weight: 500; margin: 16px 0;">Suscríbase para recibir las últimas noticias y promociones</p>
                <button type="submit" class="newsletter-btn">Suscribirse</button>
            </form>
        </div>
    </div>
    
    <div class="footer-copyright">
        <img src="https://placehold.co/20x20" alt="Copyright" style="width: 20px; height: 20px; margin-right: 10px;" />
        2025. Todos los derechos reservados - AutoClick.cr
    </div>
</footer>