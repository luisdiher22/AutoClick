@{
    var currentPage = ViewContext.RouteData.Values["page"]?.ToString() ?? "";
}

<!-- Sidebar -->
<div style="width: 376px; height: calc(100vh - 80px); padding-left: 16px; padding-right: 16px; padding-top: 12px; padding-bottom: 12px; position: fixed; left: 0; top: 80px; background: #030D2B; overflow: hidden; border-right: 0.50px rgba(255, 255, 255, 0.25) solid; flex-direction: column; justify-content: flex-start; align-items: flex-start; display: inline-flex; z-index: 100; gap: 0;">

    <!-- Dashboard -->
    <div class="sidebar-item" data-estado="@(currentPage.Contains("Dashboard") ? "active" : "Default")" style="width: 344px; height: 56px; position: relative;">
        <div style="width: 344px; height: 50px; padding-top: 14px; padding-bottom: 14px; padding-left: 16px; padding-right: 22px; left: 0px; top: 3px; position: absolute; overflow: hidden; border-radius: 2px; justify-content: flex-start; align-items: center; display: inline-flex; @(currentPage.Contains("Dashboard") ? "background: rgba(255, 255, 255, 0.25);" : "") transition: background-color 0.2s ease;">
            <a href="/Admin/Dashboard" style="text-decoration: none; color: white; display: flex; align-items: center; gap: 8px; width: 100%;">
                <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                    <svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
                        <path d="M0 19.2857V6.42857L9 0L18 6.42857V19.2857H11.1429V11.5714H6.85714V19.2857H0Z" fill="white"/>
                    </svg>
                    <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Dashboard</div>
                </div>
            </a>
        </div>
    </div>

    <!-- Ingresos de la Plataforma -->
    <div class="sidebar-item" data-estado="@(currentPage.Contains("IngresosDeLaPlataforma") ? "active" : "Default")" style="width: 344px; height: 56px; position: relative;">
        <div style="width: 344px; height: 50px; padding-top: 14px; padding-bottom: 14px; padding-left: 16px; padding-right: 22px; left: 0px; top: 3px; position: absolute; overflow: hidden; border-radius: 2px; justify-content: flex-start; align-items: center; display: inline-flex; @(currentPage.Contains("IngresosDeLaPlataforma") ? "background: rgba(255, 255, 255, 0.25);" : "") transition: background-color 0.2s ease;">
            <a href="/Admin/IngresosDeLaPlataforma" style="text-decoration: none; color: white; display: flex; align-items: center; gap: 8px; width: 100%;">
                <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                    <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
                        <path d="M0 22V14.6667H7.33333V22H0ZM0 12.4444V0H7.33333V12.4444H0ZM9.77778 22V9.77778H17.1111V22H9.77778ZM9.77778 7.55556V0H17.1111V7.55556H9.77778Z" fill="white"/>
                    </svg>
                    <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Ingresos de la plataforma</div>
                </div>
            </a>
        </div>
    </div>

    <!-- Gestión de anuncios (Dropdown) -->
    <div data-estado="@(currentPage.Contains("SolicitudesPreAprobaciones") || currentPage.Contains("HistorialRechazos") || currentPage.Contains("PublicacionesPagadas") || currentPage.Contains("EliminarAnuncio") ? "desplegado" : "collapsed")" style="width: 344px; position: relative; flex-direction: column; justify-content: flex-start; align-items: flex-start; display: flex;">
        <div onclick="return toggleDropdown('gestionanuncios', event);" style="width: 344px; height: 50px; padding-top: 14px; padding-bottom: 14px; padding-left: 16px; padding-right: 22px; @(currentPage.Contains("SolicitudesPreAprobaciones") || currentPage.Contains("HistorialRechazos") || currentPage.Contains("PublicacionesPagadas") || currentPage.Contains("EliminarAnuncio") ? "background: rgba(255, 255, 255, 0.25);" : "") overflow: hidden; border-radius: 2px; justify-content: space-between; align-items: center; display: inline-flex; cursor: pointer; transition: background-color 0.2s ease;">
            <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex; pointer-events: none;">
                <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
                    <path d="M2 22C1.45 22 0.979167 21.8042 0.5875 21.4125C0.195833 21.0208 0 20.55 0 20V2C0 1.45 0.195833 0.979167 0.5875 0.5875C0.979167 0.195833 1.45 0 2 0H13L11 2H2V20H20V11L22 9V20C22 20.55 21.8042 21.0208 21.4125 21.4125C21.0208 21.8042 20.55 22 20 22H2ZM14.175 5.825L15.575 7.225L8.4 14.4V15.8H9.8L16.975 8.625L18.375 10.025L10.6 17.8H6.4V13.6L14.175 5.825ZM18.375 10.025L14.175 5.825L16.875 3.125C17.2583 2.74167 17.725 2.55 18.275 2.55C18.825 2.55 19.2917 2.74167 19.675 3.125L20.875 4.325C21.2583 4.70833 21.45 5.16667 21.45 5.7C21.45 6.23333 21.2583 6.69167 20.875 7.075L18.375 10.025Z" fill="white"/>
                </svg>
                <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Gestión de anuncios</div>
            </div>
            <svg id="gestionanuncios-arrow" width="12" height="6" viewBox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" style="transition: transform 0.3s ease; pointer-events: none; @(currentPage.Contains("SolicitudesPreAprobaciones") || currentPage.Contains("HistorialRechazos") || currentPage.Contains("PublicacionesPagadas") || currentPage.Contains("EliminarAnuncio") ? "transform: rotate(180deg);" : "")">
                <path d="M0 0L6 6L12 0H0Z" fill="white"/>
            </svg>
        </div>
        <div id="gestionanuncios-dropdown" style="width: 344px; flex-direction: column; justify-content: flex-start; align-items: flex-start; gap: 4px; @(currentPage.Contains("SolicitudesPreAprobaciones") || currentPage.Contains("HistorialRechazos") || currentPage.Contains("PublicacionesPagadas") || currentPage.Contains("EliminarAnuncio") ? "display: flex;" : "display: none;") margin-top: 8px;">
            <div class="dropdown-item" style="width: 344px; height: 40px; padding-top: 8px; padding-bottom: 8px; padding-left: 12px; padding-right: 8px; border-radius: 4px; justify-content: flex-start; align-items: center; display: inline-flex; @(currentPage.Contains("SolicitudesPreAprobaciones") ? "background: rgba(255, 255, 255, 0.25);" : "") transition: background-color 0.2s ease;">
                <a href="/Admin/SolicitudesPreAprobaciones" style="text-decoration: none; color: white; width: 100%;">
                    <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Pendientes de aprobación</div>
                </a>
            </div>
            <div class="dropdown-item" style="width: 344px; height: 40px; padding-top: 8px; padding-bottom: 8px; padding-left: 12px; padding-right: 8px; border-radius: 4px; justify-content: flex-start; align-items: center; display: inline-flex; @(currentPage.Contains("HistorialRechazos") ? "background: rgba(255, 255, 255, 0.25);" : "") transition: background-color 0.2s ease;">
                <a href="/Admin/HistorialRechazos" style="text-decoration: none; color: white; width: 100%;">
                    <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Historial de rechazos</div>
                </a>
            </div>
            <div class="dropdown-item" style="width: 344px; height: 40px; padding-top: 8px; padding-bottom: 8px; padding-left: 12px; padding-right: 8px; border-radius: 4px; justify-content: flex-start; align-items: center; display: inline-flex; @(currentPage.Contains("PublicacionesPagadas") ? "background: rgba(255, 255, 255, 0.25);" : "") transition: background-color 0.2s ease;">
                <a href="/Admin/PublicacionesPagadas" style="text-decoration: none; color: white; width: 100%;">
                    <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Publicaciones pagadas</div>
                </a>
            </div>
            <div class="dropdown-item" style="width: 344px; height: 40px; padding-top: 8px; padding-bottom: 8px; padding-left: 12px; padding-right: 8px; border-radius: 4px; justify-content: flex-start; align-items: center; display: inline-flex; @(currentPage.Contains("EliminarAnuncio") ? "background: rgba(255, 255, 255, 0.25);" : "") transition: background-color 0.2s ease;">
                <a href="/Admin/EliminarAnuncio" style="text-decoration: none; color: white; width: 100%;">
                    <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Eliminar anuncio</div>
                </a>
            </div>
        </div>
    </div>

    <!-- Publicidad -->
    <div class="sidebar-item" data-estado="@(currentPage.Contains("Publicidad") ? "active" : "Default")" style="width: 344px; height: 56px; position: relative;">
        <div style="width: 344px; height: 50px; padding-top: 14px; padding-bottom: 14px; padding-left: 16px; padding-right: 22px; left: 0px; top: 3px; position: absolute; overflow: hidden; border-radius: 2px; justify-content: flex-start; align-items: center; display: inline-flex; @(currentPage.Contains("Publicidad") ? "background: rgba(255, 255, 255, 0.25);" : "") transition: background-color 0.2s ease;">
            <a href="/Admin/Publicidad" style="text-decoration: none; color: white; display: flex; align-items: center; gap: 8px; width: 100%;">
                <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                    <svg width="22" height="17" viewBox="0 0 22 17" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
                        <path d="M0 16.5V0.5H7V16.5H0ZM9 16.5V0.5H22V16.5H9Z" fill="white"/>
                    </svg>
                    <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Publicidad</div>
                </div>
            </a>
        </div>
    </div>

    <!-- Solicitudes de fotografía -->
    <div class="sidebar-item" data-estado="@(currentPage.Contains("SolicitudesFotografia") ? "active" : "Default")" style="width: 344px; height: 56px; position: relative;">
        <div style="width: 344px; height: 50px; padding-top: 14px; padding-bottom: 14px; padding-left: 16px; padding-right: 22px; left: 0px; top: 3px; position: absolute; overflow: hidden; border-radius: 2px; justify-content: flex-start; align-items: center; display: inline-flex; @(currentPage.Contains("SolicitudesFotografia") ? "background: rgba(255, 255, 255, 0.25);" : "") transition: background-color 0.2s ease;">
            <a href="/Admin/SolicitudesFotografia" style="text-decoration: none; color: white; display: flex; align-items: center; gap: 8px; width: 100%;">
                <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                    <svg width="22" height="17" viewBox="0 0 22 17" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
                        <path d="M2 16.794C1.45 16.794 0.979167 16.5982 0.5875 16.2065C0.195833 15.8149 0 15.344 0 14.794V2.794C0 2.244 0.195833 1.77317 0.5875 1.3815C0.979167 0.989834 1.45 0.794006 2 0.794006H6.15L8 2.794H20C20.55 2.794 21.0208 2.98984 21.4125 3.3815C21.8042 3.77317 22 4.244 22 4.794V14.794C22 15.344 21.8042 15.8149 21.4125 16.2065C21.0208 16.5982 20.55 16.794 20 16.794H2ZM11 14.794C12.3833 14.794 13.5625 14.3232 14.5375 13.3815C15.5125 12.4399 16 11.2773 16 9.89401C16 8.51067 15.5125 7.34817 14.5375 6.4065C13.5625 5.46484 12.3833 4.99401 11 4.99401C9.61667 4.99401 8.4375 5.46484 7.4625 6.4065C6.4875 7.34817 6 8.51067 6 9.89401C6 11.2773 6.4875 12.4399 7.4625 13.3815C8.4375 14.3232 9.61667 14.794 11 14.794Z" fill="white"/>
                    </svg>
                    <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Solicitudes de fotografía</div>
                </div>
            </a>
        </div>
    </div>

    <!-- Centro de soporte -->
    <div class="sidebar-item" data-estado="@(currentPage.Contains("CentroDeSoporte") ? "active" : "Default")" style="width: 344px; height: 56px; position: relative;">
        <div style="width: 344px; height: 50px; padding-top: 14px; padding-bottom: 14px; padding-left: 16px; padding-right: 22px; left: 0px; top: 3px; position: absolute; overflow: hidden; border-radius: 2px; justify-content: flex-start; align-items: center; display: inline-flex; @(currentPage.Contains("CentroDeSoporte") ? "background: rgba(255, 255, 255, 0.25);" : "") transition: background-color 0.2s ease;">
            <a href="/Admin/CentroDeSoporte" style="text-decoration: none; color: white; display: flex; align-items: center; gap: 8px; width: 100%;">
                <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                    <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
                        <path d="M11 22C9.61667 22 8.31667 21.7375 7.1 21.2125C5.88333 20.6875 4.825 19.975 3.925 19.075C3.025 18.175 2.3125 17.1167 1.7875 15.9C1.2625 14.6833 1 13.3833 1 12C1 10.6167 1.2625 9.31667 1.7875 8.1C2.3125 6.88333 3.025 5.825 3.925 4.925C4.825 4.025 5.88333 3.3125 7.1 2.7875C8.31667 2.2625 9.61667 2 11 2C12.05 2 13.0542 2.15417 14.0125 2.4625C14.9708 2.77083 15.8667 3.21667 16.7 3.8L15.3 5.2C14.65 4.75 13.9458 4.39583 13.1875 4.1375C12.4292 3.87917 11.6333 3.75 10.8 3.75C8.56667 3.75 6.66667 4.52083 5.1 6.0625C3.53333 7.60417 2.75 9.5 2.75 11.75C2.75 14 3.52917 15.9042 5.0875 17.4625C6.64583 19.0208 8.55 19.8 10.8 19.8C13.05 19.8 14.9542 19.0208 16.5125 17.4625C18.0708 15.9042 18.85 14 18.85 11.75V11.2H14.7V9.3H20.6V11.75C20.6 13.1333 20.3375 14.4333 19.8125 15.65C19.2875 16.8667 18.575 17.925 17.675 18.825C16.775 19.725 15.7167 20.4375 14.5 20.9625C13.2833 21.4875 11.9833 21.75 10.6 21.75L11 22Z" fill="white"/>
                    </svg>
                    <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Centro de soporte</div>
                </div>
            </a>
        </div>
    </div>

    <!-- Importar Ventas Externas -->
    <div class="sidebar-item" data-estado="@(currentPage.Contains("ImportarVentasExternas") ? "active" : "Default")" style="width: 344px; height: 56px; position: relative;">
        <div style="width: 344px; height: 50px; padding-top: 14px; padding-bottom: 14px; padding-left: 16px; padding-right: 22px; left: 0px; top: 3px; position: absolute; overflow: hidden; border-radius: 2px; justify-content: flex-start; align-items: center; display: inline-flex; @(currentPage.Contains("ImportarVentasExternas") ? "background: rgba(255, 255, 255, 0.25);" : "") transition: background-color 0.2s ease;">
            <a href="/Admin/ImportarVentasExternas" style="text-decoration: none; color: white; display: flex; align-items: center; gap: 8px; width: 100%;">
                <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                    <svg width="22" height="18" viewBox="0 0 22 18" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
                        <path d="M2 18C1.45 18 0.979167 17.8042 0.5875 17.4125C0.195833 17.0208 0 16.55 0 16V2C0 1.45 0.195833 0.979167 0.5875 0.5875C0.979167 0.195833 1.45 0 2 0H9L11 2H20C20.55 2 21.0208 2.19583 21.4125 2.5875C21.8042 2.97917 22 3.45 22 4V16C22 16.55 21.8042 17.0208 21.4125 17.4125C21.0208 17.8042 20.55 18 20 18H2ZM2 2V16H20V4H10.175L8.175 2H2ZM8 14H14V12H8V14ZM8 10H14V8H8V10Z" fill="white"/>
                    </svg>
                    <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Importar Ventas Externas</div>
                </div>
            </a>
        </div>
    </div>

    <!-- Centro de anuncios -->
    <div class="sidebar-item" data-estado="@(currentPage.Contains("CentroAnuncios") ? "active" : "Default")" style="width: 344px; height: 56px; position: relative;">
        <div style="width: 344px; height: 50px; padding-top: 14px; padding-bottom: 14px; padding-left: 16px; padding-right: 22px; left: 0px; top: 3px; position: absolute; overflow: hidden; border-radius: 2px; justify-content: flex-start; align-items: center; display: inline-flex; @(currentPage.Contains("CentroAnuncios") ? "background: rgba(255, 255, 255, 0.25);" : "") transition: background-color 0.2s ease;">
            <a href="/Admin/CentroAnuncios" style="text-decoration: none; color: white; display: flex; align-items: center; gap: 8px; width: 100%;">
                <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                    <svg width="22" height="20" viewBox="0 0 22 20" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
                        <path d="M2 20C1.45 20 0.979167 19.8042 0.5875 19.4125C0.195833 19.0208 0 18.55 0 18V2C0 1.45 0.195833 0.979167 0.5875 0.5875C0.979167 0.195833 1.45 0 2 0H20C20.55 0 21.0208 0.195833 21.4125 0.5875C21.8042 0.979167 22 1.45 22 2V18C22 18.55 21.8042 19.0208 21.4125 19.4125C21.0208 19.8042 20.55 20 20 20H2ZM2 8H20V4H2V8ZM8 14H2V18H8V14ZM20 18V14H10V18H20ZM8 12H2V10H8V12ZM20 12V10H10V12H20Z" fill="white"/>
                    </svg>
                    <div style="text-box-trim: trim-both; text-box-edge: cap alphabetic; color: white; font-size: 16px; font-family: Montserrat; font-weight: 500; word-wrap: break-word">Centro de anuncios</div>
                </div>
            </a>
        </div>
    </div>

</div>

<script>
function toggleDropdown(dropdownId, event) {
    // Prevenir cualquier comportamiento de navegación
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }

    const dropdown = document.getElementById(dropdownId + '-dropdown');
    const arrow = document.getElementById(dropdownId + '-arrow');

    if (dropdown.style.display === 'none' || dropdown.style.display === '') {
        dropdown.style.display = 'flex';
        arrow.style.transform = 'rotate(180deg)';
    } else {
        dropdown.style.display = 'none';
        arrow.style.transform = 'rotate(0deg)';
    }

    return false;
}

// Agregar efectos hover mejorados
document.addEventListener('DOMContentLoaded', function() {
    // Hover effects para los dropdown items
    const dropdownItems = document.querySelectorAll('.dropdown-item');
    dropdownItems.forEach(item => {
        item.addEventListener('mouseenter', function() {
            if (!this.style.background.includes('0.25')) {
                this.style.background = 'rgba(255, 255, 255, 0.15)';
            }
        });
        item.addEventListener('mouseleave', function() {
            if (!this.style.background.includes('0.25')) {
                this.style.background = 'transparent';
            }
        });
    });

    // Hover effects para los menu items principales (excluir items activos)
    const sidebarItems = document.querySelectorAll('.sidebar-item[data-estado="Default"]');
    sidebarItems.forEach(item => {
        const menuDiv = item.querySelector('div[style*="position: absolute"]');
        if (menuDiv) {
            menuDiv.addEventListener('mouseenter', function() {
                this.style.background = 'rgba(255, 255, 255, 0.1)';
            });
            menuDiv.addEventListener('mouseleave', function() {
                this.style.background = 'transparent';
            });
        }
    });

    // Hover effect para Estadísticas (que no es un item activo)
    const estadisticasDiv = document.querySelector('[onclick*="estadisticas"]');
    if (estadisticasDiv) {
        estadisticasDiv.addEventListener('mouseenter', function() {
            // Mantener el fondo activo
            if (!this.style.background.includes('0.25')) {
                this.style.background = 'rgba(255, 255, 255, 0.15)';
            }
        });
        estadisticasDiv.addEventListener('mouseleave', function() {
            // Siempre mantener el fondo activo para Estadísticas
            this.style.background = 'rgba(255, 255, 255, 0.25)';
        });
    }

    // Hover effect para Gestión de anuncios
    const gestionAnunciosDiv = document.querySelector('[onclick*="gestionanuncios"]');
    if (gestionAnunciosDiv) {
        const hasActiveBackground = gestionAnunciosDiv.style.background.includes('0.25');
        
        gestionAnunciosDiv.addEventListener('mouseenter', function() {
            if (!this.style.background.includes('0.25')) {
                this.style.background = 'rgba(255, 255, 255, 0.15)';
            }
        });
        gestionAnunciosDiv.addEventListener('mouseleave', function() {
            // Solo mantener el fondo activo si originalmente tenía el fondo de 0.25
            if (hasActiveBackground) {
                this.style.background = 'rgba(255, 255, 255, 0.25)';
            } else {
                this.style.background = 'transparent';
            }
        });
    }
});
</script>
